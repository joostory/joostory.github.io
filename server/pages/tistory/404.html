<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/favicon.ico"/><meta name="description" content="JooStory.net"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><link rel="canonical" href="https://blog.joostory.net/404"/><title>React with webpack</title><meta property="og:type" content="article"/><meta property="og:title" content="React with webpack"/><meta property="og:description" content="전에 React 체험을 했었는데 그 이후로 별다른 진전이 없다가 이제 조금 시간을 내어 더 공부해보려고 한다. 시작은 역시 시작문서로 하는게 좋을 것 같아서 Getting Started를 읽기 시작했다.

난관

We recommend using React with a CommonJS module system like browserify or webpack. 

첫 문장에서 &#x27;턱!&#x27;하고 막혔다. 너무 오랜시간 javascript 세계를 떠나 있었나보다."/><meta property="og:image" content="https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="React with webpack"/><meta name="twitter:description" content="전에 React 체험을 했었는데 그 이후로 별다른 진전이 없다가 이제 조금 시간을 내어 더 공부해보려고 한다. 시작은 역시 시작문서로 하는게 좋을 것 같아서 Getting Started를 읽기 시작했다.

난관

We recommend using React with a CommonJS module system like browserify or webpack. 

첫 문장에서 &#x27;턱!&#x27;하고 막혔다. 너무 오랜시간 javascript 세계를 떠나 있었나보다."/><meta property="twitter:image" content="https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/11ae7950df9656c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/11ae7950df9656c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f76bbe1730ea85a1.js" defer=""></script><script src="/_next/static/chunks/494-fa03e5491fc3b3a9.js" defer=""></script><script src="/_next/static/chunks/pages/tistory/%5Bid%5D-571a42114028488a.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_buildManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_ssgManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class=""><div class="pt-40 pb-36 px-20 border-b-[1px] relative"><h1 class="font-bold tracking-tighter leading-tight md:leading-none mb-4 text-center text-3xl">React with webpack</h1><div class="flex justify-center"><em class="text-sm"><time dateTime="2016. 1. 23. 17:23">2016. 1. 23. 17:23</time></em></div></div><div class="w-[650px] pt-10 pb-20 mx-auto"><article class="prose"><p>전에 <a href="http://blog.joostory.net/397">React 체험</a>을 했었는데 그 이후로 별다른 진전이 없다가 이제 조금 시간을 내어 더 공부해보려고 한다. 시작은 역시 시작문서로 하는게 좋을 것 같아서 <a href="https://facebook.github.io/react/docs/getting-started.html">Getting Started</a>를 읽기 시작했다.</p>

<h2>난관</h2>

<blockquote><p>We recommend using React with a <em>CommonJS module system</em> like <em>browserify</em> or <em>webpack</em>. </p></blockquote>

<p>첫 문장에서 '턱!'하고 막혔다. 너무 오랜시간 javascript 세계를 떠나 있었나보다. 무슨 말인지 하나도 모르겠다. babel로 JSX를 javascript로 변환만 하면 되는거 아닌가 싶었는데 browserify, webpack를 사용한다고 한다. 그 것도 뭔지 모르지만 <em>CommonJS module system</em>도 뭔지 모른다. 빠르게 움직이는 세상에서 가만히 있다보니 바보가 되어있었다.</p>

<h2>CommonJS</h2>

<p>다행히 아주 유명한 것이라 잘 정리된 문서들이 많았다. 그 중에 <a href="http://d2.naver.com/helloworld/12864">네이버 D2에서 작성한 문서</a>가 초보자에게 제일 친절한 것 같다. 정리해보자면 CommonJS module system 이라는 것은 <code>require</code>를 사용해서 필요한 모듈을 가져다 쓸 수 있도록 하는 것이고 그 모듈을 만드는 방법이 <code>module.exports</code>를 사용하는 것이다. AMD는 <code>define</code>을 사용하는 것 같다.</p>

<p>아하! 그러니까 예제 코드에서 require를 사용해서 필요한 모듈을 로드하는 것이 바로 CommonJS module system인 것이고 browserify나 webpack이 require에 명시된 모듈을 가져와 넣어주는 역할을 하는 것이다.</p>

<pre><code>// main.js
var React = require('react');
var ReactDOM = require('react-dom');

ReactDOM.render(
  &lt;h1&gt;Hello, world!&lt;/h1&gt;,
  document.getElementById('example')
);</code></pre>

<p>예제에서 이미 전역인 React나 ReactDOM을 왜 require하는 것인지 궁금했는데 이런 이유였다. 이제 이게 뭔지 알았으니 browserify와 webpack을 살펴봐야겠다.</p>

<h2>browserify</h2>

<p><a href="http://browserify.org">browserify</a>는 <code>require</code>로 사용한 모듈을 포함시켜주는 도구다. 사용방법은 아래와 같은데 react의 preset으로 babelify를 transform으로 사용하였다.</p>

<pre><code>$ npm install --save react react-dom babelify babel-preset-react
$ browserify -t [ babelify --presets [ react ] ] main.js -o bundle.js</code></pre>

<p>package.json에 transform을 미리 지정해두면 좀 더 간단한 명령어로 수행이 가능하다.</p>

<pre><code>"browserify": {
	"transform": [
		["babelify", {"presets": ["react"]}]
	]
}</code></pre>

<p>browserify은 옵션을 매번 지정해야하므로 단독으로 사용하기는 어렵고 grunt나 glup에서 browserify를 사용하도록 하는 작업이 필요해 보인다. (지금까지 알아본 바로는...)</p>

<h2>webpack</h2>

<p><a href="https://webpack.github.io">webpack</a>은 browserify와 같은 일을 하지만 조금 다른 점이 있다. webpack.config.js 라는 설정파일을 사용하는 것이다.</p>

<pre><code>$ npm install --save react react-dom babel-preset-react
$ webpack</code></pre>

<p>Getting Started 문서에서 말한 위&nbsp;명령은 그냥 실행해서는 정상동작하지 않는다. 아래와 같은 설정파일을 먼저 만들어두고 실행해야 정상적으로 동작한다.</p>

<pre><code>// webpack.config.js
module.exports = {
	entry: './main.js',
	output: {
		filename: 'bundle.js'
	},
	module: {
		loaders: [
			{
				test: /\.jsx?$/,
				loader: 'babel',
				query: {
					presets: ['react']
				}
			}
		]
	}
}</code></pre>

<p>webpack 자체를 잘 몰랐으니 모르면서 무작정 해본 내 잘못이긴 하지만 적어도 어떤 loader를 사용해야 하는 지는 문서에서 좀 말해줬다면 좋았을텐데 하는 아쉬움이 있다. 정말 오랜 시간 삽질했다.</p>

<p>당연히 babel-loader가 있다고 생각했어야 한걸까? jsx-loader를 사용하도록 했다가 <a href="https://github.com/petehunt/jsx-loader">jsx-loader github</a>에 가 보고서야 babel을 사용해야함을 알았다.</p>

<h2>용량</h2>

<p>위의 과정으로 만든 bundle.js는 browserify, webpack 모두 670kb에 달했다. React, ReactDOM의 모든 코드가 bundle.js에 포함되기 때문이었다. 공개된 cdn이 있는 라이브러리를 굳이 이렇게 포함할 필요는 없으니 제외해보기로 했다. webpack으로만 해봤다.</p>

<pre><code>externals: {
    'react': 'React',
    'react-dom': "ReactDOM"
}</code></pre>

<p>webpack.config.js에 위 내용을 포함하면 require('react')는 전역의 React를 그대로 사용하게 된다. 이로써 용량은 1.7kb가 되었다. 다만 이렇게 할 경우 아래와 같이 cdn의 라이브러리도 반드시 로드를 해주어야 한다.</p>

<pre><code>&lt;script src="https://fb.me/react-0.14.3.min.js"&gt;&lt;/script&gt;
&lt;script src="https://fb.me/react-dom-0.14.3.min.js"&gt;&lt;/script&gt;
&lt;script src="bundle.js"&gt;&lt;/script&gt;</code></pre>

<h2>이제 시작</h2>

<p>Getting Started 문서의 짧은 따라하기가 끝났다. (ㅠㅠ) 이제 시작이다.</p>            </article></div></div></main></div><footer class="bg-slate-100 border-t border-accent-2 mt-6"><div class="py-4 flex flex-col items-center justify-center text-xs text-slate-500"><a href="https://twitter.com/@JooStory">@JooStory</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"404","date":"2016. 1. 23. 17:23","title":"React with webpack","content":"\u003cp\u003e전에 \u003ca href=\"http://blog.joostory.net/397\"\u003eReact 체험\u003c/a\u003e을 했었는데 그 이후로 별다른 진전이 없다가 이제 조금 시간을 내어 더 공부해보려고 한다. 시작은 역시 시작문서로 하는게 좋을 것 같아서 \u003ca href=\"https://facebook.github.io/react/docs/getting-started.html\"\u003eGetting Started\u003c/a\u003e를 읽기 시작했다.\u003c/p\u003e\n\n\u003ch2\u003e난관\u003c/h2\u003e\n\n\u003cblockquote\u003e\u003cp\u003eWe recommend using React with a \u003cem\u003eCommonJS module system\u003c/em\u003e like \u003cem\u003ebrowserify\u003c/em\u003e or \u003cem\u003ewebpack\u003c/em\u003e. \u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e첫 문장에서 '턱!'하고 막혔다. 너무 오랜시간 javascript 세계를 떠나 있었나보다. 무슨 말인지 하나도 모르겠다. babel로 JSX를 javascript로 변환만 하면 되는거 아닌가 싶었는데 browserify, webpack를 사용한다고 한다. 그 것도 뭔지 모르지만 \u003cem\u003eCommonJS module system\u003c/em\u003e도 뭔지 모른다. 빠르게 움직이는 세상에서 가만히 있다보니 바보가 되어있었다.\u003c/p\u003e\n\n\u003ch2\u003eCommonJS\u003c/h2\u003e\n\n\u003cp\u003e다행히 아주 유명한 것이라 잘 정리된 문서들이 많았다. 그 중에 \u003ca href=\"http://d2.naver.com/helloworld/12864\"\u003e네이버 D2에서 작성한 문서\u003c/a\u003e가 초보자에게 제일 친절한 것 같다. 정리해보자면 CommonJS module system 이라는 것은 \u003ccode\u003erequire\u003c/code\u003e를 사용해서 필요한 모듈을 가져다 쓸 수 있도록 하는 것이고 그 모듈을 만드는 방법이 \u003ccode\u003emodule.exports\u003c/code\u003e를 사용하는 것이다. AMD는 \u003ccode\u003edefine\u003c/code\u003e을 사용하는 것 같다.\u003c/p\u003e\n\n\u003cp\u003e아하! 그러니까 예제 코드에서 require를 사용해서 필요한 모듈을 로드하는 것이 바로 CommonJS module system인 것이고 browserify나 webpack이 require에 명시된 모듈을 가져와 넣어주는 역할을 하는 것이다.\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e// main.js\nvar React = require('react');\nvar ReactDOM = require('react-dom');\n\nReactDOM.render(\n  \u0026lt;h1\u0026gt;Hello, world!\u0026lt;/h1\u0026gt;,\n  document.getElementById('example')\n);\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003e예제에서 이미 전역인 React나 ReactDOM을 왜 require하는 것인지 궁금했는데 이런 이유였다. 이제 이게 뭔지 알았으니 browserify와 webpack을 살펴봐야겠다.\u003c/p\u003e\n\n\u003ch2\u003ebrowserify\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"http://browserify.org\"\u003ebrowserify\u003c/a\u003e는 \u003ccode\u003erequire\u003c/code\u003e로 사용한 모듈을 포함시켜주는 도구다. 사용방법은 아래와 같은데 react의 preset으로 babelify를 transform으로 사용하였다.\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e$ npm install --save react react-dom babelify babel-preset-react\n$ browserify -t [ babelify --presets [ react ] ] main.js -o bundle.js\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003epackage.json에 transform을 미리 지정해두면 좀 더 간단한 명령어로 수행이 가능하다.\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e\"browserify\": {\n\t\"transform\": [\n\t\t[\"babelify\", {\"presets\": [\"react\"]}]\n\t]\n}\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003ebrowserify은 옵션을 매번 지정해야하므로 단독으로 사용하기는 어렵고 grunt나 glup에서 browserify를 사용하도록 하는 작업이 필요해 보인다. (지금까지 알아본 바로는...)\u003c/p\u003e\n\n\u003ch2\u003ewebpack\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://webpack.github.io\"\u003ewebpack\u003c/a\u003e은 browserify와 같은 일을 하지만 조금 다른 점이 있다. webpack.config.js 라는 설정파일을 사용하는 것이다.\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e$ npm install --save react react-dom babel-preset-react\n$ webpack\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eGetting Started 문서에서 말한 위\u0026nbsp;명령은 그냥 실행해서는 정상동작하지 않는다. 아래와 같은 설정파일을 먼저 만들어두고 실행해야 정상적으로 동작한다.\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e// webpack.config.js\nmodule.exports = {\n\tentry: './main.js',\n\toutput: {\n\t\tfilename: 'bundle.js'\n\t},\n\tmodule: {\n\t\tloaders: [\n\t\t\t{\n\t\t\t\ttest: /\\.jsx?$/,\n\t\t\t\tloader: 'babel',\n\t\t\t\tquery: {\n\t\t\t\t\tpresets: ['react']\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t}\n}\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003ewebpack 자체를 잘 몰랐으니 모르면서 무작정 해본 내 잘못이긴 하지만 적어도 어떤 loader를 사용해야 하는 지는 문서에서 좀 말해줬다면 좋았을텐데 하는 아쉬움이 있다. 정말 오랜 시간 삽질했다.\u003c/p\u003e\n\n\u003cp\u003e당연히 babel-loader가 있다고 생각했어야 한걸까? jsx-loader를 사용하도록 했다가 \u003ca href=\"https://github.com/petehunt/jsx-loader\"\u003ejsx-loader github\u003c/a\u003e에 가 보고서야 babel을 사용해야함을 알았다.\u003c/p\u003e\n\n\u003ch2\u003e용량\u003c/h2\u003e\n\n\u003cp\u003e위의 과정으로 만든 bundle.js는 browserify, webpack 모두 670kb에 달했다. React, ReactDOM의 모든 코드가 bundle.js에 포함되기 때문이었다. 공개된 cdn이 있는 라이브러리를 굳이 이렇게 포함할 필요는 없으니 제외해보기로 했다. webpack으로만 해봤다.\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003eexternals: {\n    'react': 'React',\n    'react-dom': \"ReactDOM\"\n}\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003ewebpack.config.js에 위 내용을 포함하면 require('react')는 전역의 React를 그대로 사용하게 된다. 이로써 용량은 1.7kb가 되었다. 다만 이렇게 할 경우 아래와 같이 cdn의 라이브러리도 반드시 로드를 해주어야 한다.\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e\u0026lt;script src=\"https://fb.me/react-0.14.3.min.js\"\u0026gt;\u0026lt;/script\u0026gt;\n\u0026lt;script src=\"https://fb.me/react-dom-0.14.3.min.js\"\u0026gt;\u0026lt;/script\u0026gt;\n\u0026lt;script src=\"bundle.js\"\u0026gt;\u0026lt;/script\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n\n\u003ch2\u003e이제 시작\u003c/h2\u003e\n\n\u003cp\u003eGetting Started 문서의 짧은 따라하기가 끝났다. (ㅠㅠ) 이제 시작이다.\u003c/p\u003e            ","summary":"전에 React 체험을 했었는데 그 이후로 별다른 진전이 없다가 이제 조금 시간을 내어 더 공부해보려고 한다. 시작은 역시 시작문서로 하는게 좋을 것 같아서 Getting Started를 읽기 시작했다.\n\n난관\n\nWe recommend using React with a CommonJS module system like browserify or webpack. \n\n첫 문장에서 '턱!'하고 막혔다. 너무 오랜시간 javascript 세계를 떠나 있었나보다.","image":"https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"}},"__N_SSG":true},"page":"/tistory/[id]","query":{"id":"404"},"buildId":"k2SjylS4DhAPzPoZgQ49x","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>