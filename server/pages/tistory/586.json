{"pageProps":{"post":{"id":"586","date":"2019. 12. 16. 11:48","title":"Google Actions를 이용한 flutter 앱 배포","content":"<p>electron, npm 배포에 이어 flutter 앱도 Github Actions로 배포를 해보기로 했다.</p>\n<p>flutter 빌드를 위해서 필요한 것은 의외로 단순하다. java, flutter 가 전부다. ios 빌드를 위해서는 os를 macos로 하는 것이 필요하겠지만 일단은 android로만 빌드하기 때문에 ubuntu로 했다.</p>\n<pre><code>- uses: subosito/flutter-action@v1\n  with:\n    channel: &#39;stable&#39;</code></pre><p>flutter의 준비는 <a href=\"https://github.com/marketplace/actions/flutter-action\">subosito/flutter-action</a>를 사용할 수 있고, <code>channel</code>이나 <code>flutter-version</code>을 옵션으로 변경할 수 있다. 결과물은 electron에서와 마찬가지로 release에 업로드를 했다. 생각 같아서는 google play api를 사용해서 테스트버전으로 업로드까지 하고 싶었는데... 그래봐야 결국 수동으로 설명쓰고 검토버튼 누르고 출시버튼 누르고 해야해서 거기까지는 하지 않았다.</p>\n<p>아래는 전체 코드다. github actions 만세!</p>\n<pre><code>name: Release\n\non:\n  push:\n    tags:\n      - v*\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Context\n        env:\n          GITHUB_CONTEXT: ${{ toJson(github) }}\n        run: echo &quot;$GITHUB_CONTEXT&quot;\n      - uses: actions/checkout@v1\n        with:\n          fetch-depth: 1\n      - uses: actions/setup-java@v1\n        with:\n          java-version: &#39;12.x&#39;\n      - uses: subosito/flutter-action@v1\n        with:\n          channel: &#39;stable&#39;\n      - name: Decrypt secret\n        run: ./.github/scripts/decrypt_secret.sh\n        env:\n          BUILD_KEY: ${{ secrets.BUILD_KEY }}\n          BUILD_IV: ${{ secrets.BUILD_IV }}\n      - name: Build App\n        run: |\n          flutter pub get\n          flutter build apk --split-per-abi\n      - name: Release\n        uses: softprops/action-gh-release@v1\n        with:\n          files: |\n            build/app/outputs/apk/release/*.apk\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}</code></pre>            ","summary":"electron, npm 배포에 이어 flutter 앱도 Github Actions로 배포를 해보기로 했다.\nflutter 빌드를 위해서 필요한 것은 의외로 단순하다. java, flutter 가 전부다. ios 빌드를 위해서는 os를 macos로 하는 것이 필요하겠지만 일단은 android로만 빌드하기 때문에 ubuntu로 했다.\n<code>- uses: subosito/flutter-action@v1\n  with:\n    channel: &#39;s","image":"https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"}},"__N_SSG":true}