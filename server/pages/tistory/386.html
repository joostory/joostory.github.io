<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/favicon.ico"/><meta name="description" content="JooStory.net"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><link rel="canonical" href="https://blog.joostory.net/386"/><title>jQuery CDN 속도문제</title><meta property="og:type" content="article"/><meta property="og:title" content="jQuery CDN 속도문제"/><meta property="og:description" content="언젠가부터 블로그 접속 속도가 무척이나 느려졌다. 굉장히 자주 화면에 아무것도 안나오는 상태로 멈춰있었다. 뭔가 서버 리스스 하나가 response를 주고 있지 않는 것 같았다. 내 블로그에 문제가 생긴건가 싶어서 정말 짜증이 났다. 이걸 해결하려면 어디서부터 시작을 해야하나 티스토리에 문의를 해야하나 짜증은 났지만 참고 찾아보기 시작했다.

원인
처음엔 티스토리 서버에 문제가 생긴 줄 알았는데 가만보니 jquery가 문제였다. 로딩 속도를 빨리하고 싶"/><meta property="og:image" content="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F257257445611EE7715"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="jQuery CDN 속도문제"/><meta name="twitter:description" content="언젠가부터 블로그 접속 속도가 무척이나 느려졌다. 굉장히 자주 화면에 아무것도 안나오는 상태로 멈춰있었다. 뭔가 서버 리스스 하나가 response를 주고 있지 않는 것 같았다. 내 블로그에 문제가 생긴건가 싶어서 정말 짜증이 났다. 이걸 해결하려면 어디서부터 시작을 해야하나 티스토리에 문의를 해야하나 짜증은 났지만 참고 찾아보기 시작했다.

원인
처음엔 티스토리 서버에 문제가 생긴 줄 알았는데 가만보니 jquery가 문제였다. 로딩 속도를 빨리하고 싶"/><meta property="twitter:image" content="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F257257445611EE7715"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/11ae7950df9656c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/11ae7950df9656c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f76bbe1730ea85a1.js" defer=""></script><script src="/_next/static/chunks/494-fa03e5491fc3b3a9.js" defer=""></script><script src="/_next/static/chunks/pages/tistory/%5Bid%5D-571a42114028488a.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_buildManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_ssgManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class=""><div class="pt-40 pb-36 px-20 border-b-[1px] relative"><h1 class="font-bold tracking-tighter leading-tight md:leading-none mb-4 text-center text-3xl">jQuery CDN 속도문제</h1><div class="flex justify-center"><em class="text-sm"><time dateTime="2015. 10. 5. 12:30">2015. 10. 5. 12:30</time></em></div></div><div class="w-[650px] pt-10 pb-20 mx-auto"><article class="prose"><p>언젠가부터 블로그 접속 속도가 무척이나 느려졌다. 굉장히 자주 화면에 아무것도 안나오는 상태로 멈춰있었다. 뭔가 서버 리스스 하나가 response를 주고 있지 않는 것 같았다. 내 블로그에 문제가 생긴건가 싶어서 정말 짜증이 났다. 이걸 해결하려면 어디서부터 시작을 해야하나 티스토리에 문의를 해야하나 짜증은 났지만 참고 찾아보기 시작했다.</p>

<h2>원인</h2><p style="text-align: center; clear: none; float: none;"><span class="imageblock" style="display:inline-block;width:683px;;height:auto;max-width:100%"><span data-url="https://t1.daumcdn.net/cfile/tistory/266F83445611EE7719?download" data-lightbox="lightbox"><img srcset="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile8.uf.tistory.com%2Fimage%2F266F83445611EE77194730" src="https://t1.daumcdn.net/cfile/tistory/266F83445611EE7719" style="cursor: pointer;max-width:100%;height:auto" width="683" height="46" filename="스크린샷 2015-10-05 오전 12.31.27.png" filemime="image/png" ></span></span></p>
<p>처음엔 티스토리 서버에 문제가 생긴 줄 알았는데 가만보니 jquery가 문제였다. 로딩 속도를 빨리하고 싶어서 쓴 cdn인데 여기서 무한정 대기가 걸려있던 거다. 사용하고 있던 cdn은 jquery에서 공식적으로 제공하는 code.jquery.com 서버다.</p>
<p>찾아보니 <a href="http://blog.outsider.ne.kr/493">jQuery CDN 속도 비교</a>를 한 곳도 있다. 무려 2010년에 작성된 글인데 지금까지 이 문제가 있는 것 같다. 지금도 이 문제가 유효할까 싶어 확인을 해보기로 했다.</p>

<h2>확인</h2>

<p style="text-align: center; clear: none; float: none;"><span class="imageblock" style="display:inline-block;width:683px;;height:auto;max-width:100%"><span data-url="https://t1.daumcdn.net/cfile/tistory/257257445611EE7715?download" data-lightbox="lightbox"><img srcset="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile10.uf.tistory.com%2Fimage%2F257257445611EE7715E275" src="https://t1.daumcdn.net/cfile/tistory/257257445611EE7715" style="cursor: pointer;max-width:100%;height:auto" width="683" height="180" filename="스크린샷 2015-10-05 오전 11.01.30.png" filemime="image/png" ></span></span></p>
<p>간단히 리소스 다운로드를 하고 시간을 출력하는 스크립트를 만들어서 확인한 결과다. 놀랍게도 code.jquery.com은 로딩 실패가 2번에 평균 1초가 넘는다. 물론 네트웍 상황에 따라 다르겠지만 code.jquery.com은 적어도 나는 사용해선 안되는 cdn이다.</p>

<pre class="prettyprint"><code>#!/usr/bin/env php
&lt;?

class Resource {
	public $provider;
	public $url;

	public function __construct($provider, $url) {
		$this-&gt;provider = $provider;
		$this-&gt;url = $url;
	}

	public function check() {
		$beforeTime = round(microtime(true) * 1000);
		if ($fp = fopen($this-&gt;url, &#39;r&#39;)) {
			while (fread($fp, 1024)) {
				echo(&quot;.&quot;);
			}
			$timeDiff = round(microtime(true) * 1000) - $beforeTime;
			echo(&quot; {$timeDiff}ms\n&quot;);
		} else {
			echo(&quot;Read failed\n&quot;);
		}
	}

	public function toString() {
		return $this-&gt;provider . &quot; : &quot; . $this-&gt;url;
	}
}

$jqueryResources = array(
	new Resource(&quot;Google&quot;, &quot;https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js&quot;),
	new Resource(&quot;MS&quot;, &quot;https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.4.min.js&quot;),
	new Resource(&quot;CDNJS&quot;, &quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js&quot;),
	new Resource(&quot;JSDelivr&quot;, &quot;https://cdn.jsdelivr.net/jquery/2.1.4/jquery.min.js&quot;),
	new Resource(&quot;jquery&quot;, &quot;https://code.jquery.com/jquery-2.1.4.min.js&quot;)
);

foreach($jqueryResources as $resource) {
	echo ($resource-&gt;toString() . &quot;\n&quot;);
	$resource-&gt;check();
}</code></pre>            </article></div></div></main></div><footer class="bg-slate-100 border-t border-accent-2 mt-6"><div class="py-4 flex flex-col items-center justify-center text-xs text-slate-500"><a href="https://twitter.com/@JooStory">@JooStory</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"386","date":"2015. 10. 5. 12:30","title":"jQuery CDN 속도문제","content":"\u003cp\u003e언젠가부터 블로그 접속 속도가 무척이나 느려졌다. 굉장히 자주 화면에 아무것도 안나오는 상태로 멈춰있었다. 뭔가 서버 리스스 하나가 response를 주고 있지 않는 것 같았다. 내 블로그에 문제가 생긴건가 싶어서 정말 짜증이 났다. 이걸 해결하려면 어디서부터 시작을 해야하나 티스토리에 문의를 해야하나 짜증은 났지만 참고 찾아보기 시작했다.\u003c/p\u003e\n\n\u003ch2\u003e원인\u003c/h2\u003e\u003cp style=\"text-align: center; clear: none; float: none;\"\u003e\u003cspan class=\"imageblock\" style=\"display:inline-block;width:683px;;height:auto;max-width:100%\"\u003e\u003cspan data-url=\"https://t1.daumcdn.net/cfile/tistory/266F83445611EE7719?download\" data-lightbox=\"lightbox\"\u003e\u003cimg srcset=\"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=http%3A%2F%2Fcfile8.uf.tistory.com%2Fimage%2F266F83445611EE77194730\" src=\"https://t1.daumcdn.net/cfile/tistory/266F83445611EE7719\" style=\"cursor: pointer;max-width:100%;height:auto\" width=\"683\" height=\"46\" filename=\"스크린샷 2015-10-05 오전 12.31.27.png\" filemime=\"image/png\" \u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e처음엔 티스토리 서버에 문제가 생긴 줄 알았는데 가만보니 jquery가 문제였다. 로딩 속도를 빨리하고 싶어서 쓴 cdn인데 여기서 무한정 대기가 걸려있던 거다. 사용하고 있던 cdn은 jquery에서 공식적으로 제공하는 code.jquery.com 서버다.\u003c/p\u003e\n\u003cp\u003e찾아보니 \u003ca href=\"http://blog.outsider.ne.kr/493\"\u003ejQuery CDN 속도 비교\u003c/a\u003e를 한 곳도 있다. 무려 2010년에 작성된 글인데 지금까지 이 문제가 있는 것 같다. 지금도 이 문제가 유효할까 싶어 확인을 해보기로 했다.\u003c/p\u003e\n\n\u003ch2\u003e확인\u003c/h2\u003e\n\n\u003cp style=\"text-align: center; clear: none; float: none;\"\u003e\u003cspan class=\"imageblock\" style=\"display:inline-block;width:683px;;height:auto;max-width:100%\"\u003e\u003cspan data-url=\"https://t1.daumcdn.net/cfile/tistory/257257445611EE7715?download\" data-lightbox=\"lightbox\"\u003e\u003cimg srcset=\"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=http%3A%2F%2Fcfile10.uf.tistory.com%2Fimage%2F257257445611EE7715E275\" src=\"https://t1.daumcdn.net/cfile/tistory/257257445611EE7715\" style=\"cursor: pointer;max-width:100%;height:auto\" width=\"683\" height=\"180\" filename=\"스크린샷 2015-10-05 오전 11.01.30.png\" filemime=\"image/png\" \u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e간단히 리소스 다운로드를 하고 시간을 출력하는 스크립트를 만들어서 확인한 결과다. 놀랍게도 code.jquery.com은 로딩 실패가 2번에 평균 1초가 넘는다. 물론 네트웍 상황에 따라 다르겠지만 code.jquery.com은 적어도 나는 사용해선 안되는 cdn이다.\u003c/p\u003e\n\n\u003cpre class=\"prettyprint\"\u003e\u003ccode\u003e#!/usr/bin/env php\n\u0026lt;?\n\nclass Resource {\n\tpublic $provider;\n\tpublic $url;\n\n\tpublic function __construct($provider, $url) {\n\t\t$this-\u0026gt;provider = $provider;\n\t\t$this-\u0026gt;url = $url;\n\t}\n\n\tpublic function check() {\n\t\t$beforeTime = round(microtime(true) * 1000);\n\t\tif ($fp = fopen($this-\u0026gt;url, \u0026#39;r\u0026#39;)) {\n\t\t\twhile (fread($fp, 1024)) {\n\t\t\t\techo(\u0026quot;.\u0026quot;);\n\t\t\t}\n\t\t\t$timeDiff = round(microtime(true) * 1000) - $beforeTime;\n\t\t\techo(\u0026quot; {$timeDiff}ms\\n\u0026quot;);\n\t\t} else {\n\t\t\techo(\u0026quot;Read failed\\n\u0026quot;);\n\t\t}\n\t}\n\n\tpublic function toString() {\n\t\treturn $this-\u0026gt;provider . \u0026quot; : \u0026quot; . $this-\u0026gt;url;\n\t}\n}\n\n$jqueryResources = array(\n\tnew Resource(\u0026quot;Google\u0026quot;, \u0026quot;https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js\u0026quot;),\n\tnew Resource(\u0026quot;MS\u0026quot;, \u0026quot;https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.4.min.js\u0026quot;),\n\tnew Resource(\u0026quot;CDNJS\u0026quot;, \u0026quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js\u0026quot;),\n\tnew Resource(\u0026quot;JSDelivr\u0026quot;, \u0026quot;https://cdn.jsdelivr.net/jquery/2.1.4/jquery.min.js\u0026quot;),\n\tnew Resource(\u0026quot;jquery\u0026quot;, \u0026quot;https://code.jquery.com/jquery-2.1.4.min.js\u0026quot;)\n);\n\nforeach($jqueryResources as $resource) {\n\techo ($resource-\u0026gt;toString() . \u0026quot;\\n\u0026quot;);\n\t$resource-\u0026gt;check();\n}\u003c/code\u003e\u003c/pre\u003e            ","summary":"언젠가부터 블로그 접속 속도가 무척이나 느려졌다. 굉장히 자주 화면에 아무것도 안나오는 상태로 멈춰있었다. 뭔가 서버 리스스 하나가 response를 주고 있지 않는 것 같았다. 내 블로그에 문제가 생긴건가 싶어서 정말 짜증이 났다. 이걸 해결하려면 어디서부터 시작을 해야하나 티스토리에 문의를 해야하나 짜증은 났지만 참고 찾아보기 시작했다.\n\n원인\n처음엔 티스토리 서버에 문제가 생긴 줄 알았는데 가만보니 jquery가 문제였다. 로딩 속도를 빨리하고 싶","image":"https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2\u0026fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F257257445611EE7715"}},"__N_SSG":true},"page":"/tistory/[id]","query":{"id":"386"},"buildId":"k2SjylS4DhAPzPoZgQ49x","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>