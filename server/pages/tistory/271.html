<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/favicon.ico"/><meta name="description" content="JooStory.net"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><link rel="canonical" href="https://blog.joostory.net/271"/><title>Tomcat을 사용할 때 request.getRemoteAddr() 이 이상한 값을 가져온다면?</title><meta property="og:type" content="article"/><meta property="og:title" content="Tomcat을 사용할 때 request.getRemoteAddr() 이 이상한 값을 가져온다면?"/><meta property="og:description" content="request.getRemoteAddr() 로 접속한 사용자의 ip를 알아낼 수 있습니다.
그런데 이상하게도 수많은 서버 중 한대에서만 계속 그 서버 자신의 ip를 사용하고 있는 겁니다.
정말 황당한 상황!

고민에 고민에 고민을 하면서 찾아보던 중 아파치 설정에서 다음과 같은 이상 야릇한 부분을 찾아냈습니다.
JkOptions     +ForwardLocalAddress
이렇게 하면 request.getRemoteAddr() 을 서버자신의 IP로 가져"/><meta property="og:image" content="https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Tomcat을 사용할 때 request.getRemoteAddr() 이 이상한 값을 가져온다면?"/><meta name="twitter:description" content="request.getRemoteAddr() 로 접속한 사용자의 ip를 알아낼 수 있습니다.
그런데 이상하게도 수많은 서버 중 한대에서만 계속 그 서버 자신의 ip를 사용하고 있는 겁니다.
정말 황당한 상황!

고민에 고민에 고민을 하면서 찾아보던 중 아파치 설정에서 다음과 같은 이상 야릇한 부분을 찾아냈습니다.
JkOptions     +ForwardLocalAddress
이렇게 하면 request.getRemoteAddr() 을 서버자신의 IP로 가져"/><meta property="twitter:image" content="https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/11ae7950df9656c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/11ae7950df9656c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f76bbe1730ea85a1.js" defer=""></script><script src="/_next/static/chunks/494-fa03e5491fc3b3a9.js" defer=""></script><script src="/_next/static/chunks/pages/tistory/%5Bid%5D-571a42114028488a.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_buildManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_ssgManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class=""><div class="pt-40 pb-36 px-20 border-b-[1px] relative"><h1 class="font-bold tracking-tighter leading-tight md:leading-none mb-4 text-center text-3xl">Tomcat을 사용할 때 request.getRemoteAddr() 이 이상한 값을 가져온다면?</h1><div class="flex justify-center"><em class="text-sm"><time dateTime="2010. 7. 30. 12:23">2010. 7. 30. 12:23</time></em></div></div><div class="w-[650px] pt-10 pb-20 mx-auto"><article class="prose">request.getRemoteAddr() 로 접속한 사용자의 ip를 알아낼 수 있습니다.<br>
그런데 이상하게도 수많은 서버 중 한대에서만 계속 그 서버 자신의 ip를 사용하고 있는 겁니다.<br>
정말 황당한 상황!<br>
<br>
고민에 고민에 고민을 하면서 찾아보던 중 아파치 설정에서 다음과 같은 이상 야릇한 부분을 찾아냈습니다.<br>
<br><blockquote>JkOptions     +ForwardLocalAddress</blockquote><br>
이렇게 하면 request.getRemoteAddr() 을 서버자신의 IP로 가져옵니다.<br>
뭐야? 기본 아냐? 하실 수도 있겠지만... 모르는 건 이제 알아가면 되는거니까 ^^ 씁쓸하면서도 기분좋네요.<br>
<br>자세한 설명 : <a title="[http://www.lifeenv.gov.sk/tomcat-docs/jk/config/apache.html]로 이동합니다." target="_blank" href="http://www.lifeenv.gov.sk/tomcat-docs/jk/config/apache.html">http://www.lifeenv.gov.sk/tomcat-docs/jk/config/apache.html</a><br>
<br><br>            </article></div></div></main></div><footer class="bg-slate-100 border-t border-accent-2 mt-6"><div class="py-4 flex flex-col items-center justify-center text-xs text-slate-500"><a href="https://twitter.com/@JooStory">@JooStory</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"271","date":"2010. 7. 30. 12:23","title":"Tomcat을 사용할 때 request.getRemoteAddr() 이 이상한 값을 가져온다면?","content":"request.getRemoteAddr() 로 접속한 사용자의 ip를 알아낼 수 있습니다.\u003cbr\u003e\n그런데 이상하게도 수많은 서버 중 한대에서만 계속 그 서버 자신의 ip를 사용하고 있는 겁니다.\u003cbr\u003e\n정말 황당한 상황!\u003cbr\u003e\n\u003cbr\u003e\n고민에 고민에 고민을 하면서 찾아보던 중 아파치 설정에서 다음과 같은 이상 야릇한 부분을 찾아냈습니다.\u003cbr\u003e\n\u003cbr\u003e\u003cblockquote\u003eJkOptions     +ForwardLocalAddress\u003c/blockquote\u003e\u003cbr\u003e\n이렇게 하면 request.getRemoteAddr() 을 서버자신의 IP로 가져옵니다.\u003cbr\u003e\n뭐야? 기본 아냐? 하실 수도 있겠지만... 모르는 건 이제 알아가면 되는거니까 ^^ 씁쓸하면서도 기분좋네요.\u003cbr\u003e\n\u003cbr\u003e자세한 설명 : \u003ca title=\"[http://www.lifeenv.gov.sk/tomcat-docs/jk/config/apache.html]로 이동합니다.\" target=\"_blank\" href=\"http://www.lifeenv.gov.sk/tomcat-docs/jk/config/apache.html\"\u003ehttp://www.lifeenv.gov.sk/tomcat-docs/jk/config/apache.html\u003c/a\u003e\u003cbr\u003e\n\u003cbr\u003e\u003cbr\u003e            ","summary":"request.getRemoteAddr() 로 접속한 사용자의 ip를 알아낼 수 있습니다.\n그런데 이상하게도 수많은 서버 중 한대에서만 계속 그 서버 자신의 ip를 사용하고 있는 겁니다.\n정말 황당한 상황!\n\n고민에 고민에 고민을 하면서 찾아보던 중 아파치 설정에서 다음과 같은 이상 야릇한 부분을 찾아냈습니다.\nJkOptions     +ForwardLocalAddress\n이렇게 하면 request.getRemoteAddr() 을 서버자신의 IP로 가져","image":"https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"}},"__N_SSG":true},"page":"/tistory/[id]","query":{"id":"271"},"buildId":"k2SjylS4DhAPzPoZgQ49x","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>