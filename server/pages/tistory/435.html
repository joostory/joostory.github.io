<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/favicon.ico"/><meta name="description" content="JooStory.net"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><link rel="canonical" href="https://blog.joostory.net/435"/><title>webpack-dev-server 시작하기</title><meta property="og:type" content="article"/><meta property="og:title" content="webpack-dev-server 시작하기"/><meta property="og:description" content="webpack-dev-server는 webpack 빌드를 테스트할때 유용한 http 서버다. 문서에도 간단히 설명되어 있지만 Express의 심플버전이라고 보면 된다. 결과물을 file로 쓰지 않고 메모리에서 빌드해서 테스트해 볼 수 있다.
사용법
먼저 webpack 설정을 다음과 같이 만든다. output.publicPath는 클라이언트가 빌드된 파일에 접근할 수 있도록 서버가 제공할 path이다.
&lt;code&gt;// webpack.config.js

v"/><meta property="og:image" content="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F215E3F4657D82DA20E"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="webpack-dev-server 시작하기"/><meta name="twitter:description" content="webpack-dev-server는 webpack 빌드를 테스트할때 유용한 http 서버다. 문서에도 간단히 설명되어 있지만 Express의 심플버전이라고 보면 된다. 결과물을 file로 쓰지 않고 메모리에서 빌드해서 테스트해 볼 수 있다.
사용법
먼저 webpack 설정을 다음과 같이 만든다. output.publicPath는 클라이언트가 빌드된 파일에 접근할 수 있도록 서버가 제공할 path이다.
&lt;code&gt;// webpack.config.js

v"/><meta property="twitter:image" content="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F215E3F4657D82DA20E"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/11ae7950df9656c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/11ae7950df9656c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f76bbe1730ea85a1.js" defer=""></script><script src="/_next/static/chunks/494-fa03e5491fc3b3a9.js" defer=""></script><script src="/_next/static/chunks/pages/tistory/%5Bid%5D-571a42114028488a.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_buildManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_ssgManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class=""><div class="pt-40 pb-36 px-20 border-b-[1px] relative"><h1 class="font-bold tracking-tighter leading-tight md:leading-none mb-4 text-center text-3xl">webpack-dev-server 시작하기</h1><div class="flex justify-center"><em class="text-sm"><time dateTime="2016. 9. 14. 01:49">2016. 9. 14. 01:49</time></em></div></div><div class="w-[650px] pt-10 pb-20 mx-auto"><article class="prose"><p><a href="https://webpack.github.io/docs/webpack-dev-server.html">webpack-dev-server</a>는 webpack 빌드를 테스트할때 유용한 http 서버다. 문서에도 간단히 설명되어 있지만 Express의 심플버전이라고 보면 된다. 결과물을 file로 쓰지 않고 메모리에서 빌드해서 테스트해 볼 수 있다.</p><p style="text-align: center"><span class="imageblock" style="display:inline-block;width:497px;;height:auto;max-width:100%"><img srcset="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile6.uf.tistory.com%2Fimage%2F215E3F4657D82DA20E2F07" src="https://t1.daumcdn.net/cfile/tistory/215E3F4657D82DA20E" style="max-width:100%;height:auto" width="497" height="270" filename="68747470733a2f2f7765627061636b2e6769746875622e696f2f6173736574732f6c6f676f2e706e67.png" filemime="image/png"></span></p>
<h2 id="header--">사용법</h2>
<p>먼저 webpack 설정을 다음과 같이 만든다. <a href="https://webpack.github.io/docs/configuration.html#output-publicpath">output.publicPath</a>는 클라이언트가 빌드된 파일에 접근할 수 있도록 서버가 제공할 path이다.</p>
<pre><code>// webpack.config.js

var path = require("path");
module.exports = {
  entry: {
    app: ["./app/main.js"]
  },
  output: {
    path: path.resolve(__dirname, "build"),
    publicPath: "/assets/",
    filename: "bundle.js"
  }
};
</code></pre><p>결과물이 <code>/assets/bundle.js</code>와 같은 path로 제공되므로 index.html 파일을 아래와 같이 만들어준다. 여기에 필요한 내용을 넣으면 된다. </p>
<pre><code>// build/index.html

&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script src="assets/bundle.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>서버의 구동은 npm으로 webpack-dev-server를 설치한 후 아래와 같이 실행하면 된다. content-base를 <code>build</code>로 설정하면 <code>http://localhost:8080</code>으로 만들어둔 <code>index.html</code>과 빌드된 <code>assets/bundle.js</code>로 접근이 가능하게 된다.</p>
<pre><code>$ webpack-dev-server --content-base build/
</code></pre><h2 id="header-production-development-mode">production, development mode</h2>
<p>dev-server는 development mode로 동작하도록 하고 build는 production mode로 할 수 있도록 몇가지 설정을 한다. 먼저 package.json에 <code>scripts</code>를 추가해 매번 길게 입력하지 않아도 되도록 한다. <code>NODE_ENV</code>를 구분하였다.</p>
<pre><code>// package.json

"scripts": {
    "build": "NODE_ENV=production webpack",
    "start": "NODE_ENV=development webpack-dev-server --content-base ./build"
}
</code></pre><p>구분된 <code>NODE_ENV</code>를 webpack config 내부에서 사용한다. production mode와 development mode에서의 plugin을 구분하였다.</p>
<pre><code>// webpack.config.js

plugins: process.env.NODE_ENV !== "production"? [] : [
    new webpack.optimize.DedupePlugin(),
    new webpack.optimize.OccurenceOrderPlugin(),
    new webpack.optimize.UglifyJsPlugin()
]
</code></pre><h2 id="header--">마치며</h2>
<p>정리를 하면서 이전에 <a href="https://brunch.co.kr">브런치</a> 댓글 작업을 하면서 만든 <a href="https://github.com/joostory/comment-editor">댓글 샘플 코드</a>에 적용해보았다. webpack으로 빌드를 바꾸면서 CommonJS까지 적용하느라 작업량이 많아졌지만 그래도 적용하길 잘했다 싶다.</p><p>이전까지는 급하니까 간단한 http server와 <code>webpack --watch</code>로 해결했는데 이렇게 정리하고 나니 앞으론 급해도 이런 방법을 쓸 수 있을 것 같다.</p><p>(벌써 새벽 2시 ㅠㅠ)</p>            </article></div></div></main></div><footer class="bg-slate-100 border-t border-accent-2 mt-6"><div class="py-4 flex flex-col items-center justify-center text-xs text-slate-500"><a href="https://twitter.com/@JooStory">@JooStory</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"435","date":"2016. 9. 14. 01:49","title":"webpack-dev-server 시작하기","content":"\u003cp\u003e\u003ca href=\"https://webpack.github.io/docs/webpack-dev-server.html\"\u003ewebpack-dev-server\u003c/a\u003e는 webpack 빌드를 테스트할때 유용한 http 서버다. 문서에도 간단히 설명되어 있지만 Express의 심플버전이라고 보면 된다. 결과물을 file로 쓰지 않고 메모리에서 빌드해서 테스트해 볼 수 있다.\u003c/p\u003e\u003cp style=\"text-align: center\"\u003e\u003cspan class=\"imageblock\" style=\"display:inline-block;width:497px;;height:auto;max-width:100%\"\u003e\u003cimg srcset=\"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=http%3A%2F%2Fcfile6.uf.tistory.com%2Fimage%2F215E3F4657D82DA20E2F07\" src=\"https://t1.daumcdn.net/cfile/tistory/215E3F4657D82DA20E\" style=\"max-width:100%;height:auto\" width=\"497\" height=\"270\" filename=\"68747470733a2f2f7765627061636b2e6769746875622e696f2f6173736574732f6c6f676f2e706e67.png\" filemime=\"image/png\"\u003e\u003c/span\u003e\u003c/p\u003e\n\u003ch2 id=\"header--\"\u003e사용법\u003c/h2\u003e\n\u003cp\u003e먼저 webpack 설정을 다음과 같이 만든다. \u003ca href=\"https://webpack.github.io/docs/configuration.html#output-publicpath\"\u003eoutput.publicPath\u003c/a\u003e는 클라이언트가 빌드된 파일에 접근할 수 있도록 서버가 제공할 path이다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e// webpack.config.js\n\nvar path = require(\"path\");\nmodule.exports = {\n  entry: {\n    app: [\"./app/main.js\"]\n  },\n  output: {\n    path: path.resolve(__dirname, \"build\"),\n    publicPath: \"/assets/\",\n    filename: \"bundle.js\"\n  }\n};\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e결과물이 \u003ccode\u003e/assets/bundle.js\u003c/code\u003e와 같은 path로 제공되므로 index.html 파일을 아래와 같이 만들어준다. 여기에 필요한 내용을 넣으면 된다. \u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e// build/index.html\n\n\u0026lt;!DOCTYPE html\u0026gt;\n\u0026lt;html lang=\"en\"\u0026gt;\n\u0026lt;head\u0026gt;\n  \u0026lt;meta charset=\"UTF-8\"\u0026gt;\n  \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt;\n\u0026lt;/head\u0026gt;\n\u0026lt;body\u0026gt;\n  \u0026lt;script src=\"assets/bundle.js\"\u0026gt;\u0026lt;/script\u0026gt;\n\u0026lt;/body\u0026gt;\n\u0026lt;/html\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e서버의 구동은 npm으로 webpack-dev-server를 설치한 후 아래와 같이 실행하면 된다. content-base를 \u003ccode\u003ebuild\u003c/code\u003e로 설정하면 \u003ccode\u003ehttp://localhost:8080\u003c/code\u003e으로 만들어둔 \u003ccode\u003eindex.html\u003c/code\u003e과 빌드된 \u003ccode\u003eassets/bundle.js\u003c/code\u003e로 접근이 가능하게 된다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ webpack-dev-server --content-base build/\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"header-production-development-mode\"\u003eproduction, development mode\u003c/h2\u003e\n\u003cp\u003edev-server는 development mode로 동작하도록 하고 build는 production mode로 할 수 있도록 몇가지 설정을 한다. 먼저 package.json에 \u003ccode\u003escripts\u003c/code\u003e를 추가해 매번 길게 입력하지 않아도 되도록 한다. \u003ccode\u003eNODE_ENV\u003c/code\u003e를 구분하였다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e// package.json\n\n\"scripts\": {\n    \"build\": \"NODE_ENV=production webpack\",\n    \"start\": \"NODE_ENV=development webpack-dev-server --content-base ./build\"\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e구분된 \u003ccode\u003eNODE_ENV\u003c/code\u003e를 webpack config 내부에서 사용한다. production mode와 development mode에서의 plugin을 구분하였다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e// webpack.config.js\n\nplugins: process.env.NODE_ENV !== \"production\"? [] : [\n    new webpack.optimize.DedupePlugin(),\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.optimize.UglifyJsPlugin()\n]\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"header--\"\u003e마치며\u003c/h2\u003e\n\u003cp\u003e정리를 하면서 이전에 \u003ca href=\"https://brunch.co.kr\"\u003e브런치\u003c/a\u003e 댓글 작업을 하면서 만든 \u003ca href=\"https://github.com/joostory/comment-editor\"\u003e댓글 샘플 코드\u003c/a\u003e에 적용해보았다. webpack으로 빌드를 바꾸면서 CommonJS까지 적용하느라 작업량이 많아졌지만 그래도 적용하길 잘했다 싶다.\u003c/p\u003e\u003cp\u003e이전까지는 급하니까 간단한 http server와 \u003ccode\u003ewebpack --watch\u003c/code\u003e로 해결했는데 이렇게 정리하고 나니 앞으론 급해도 이런 방법을 쓸 수 있을 것 같다.\u003c/p\u003e\u003cp\u003e(벌써 새벽 2시 ㅠㅠ)\u003c/p\u003e            ","summary":"webpack-dev-server는 webpack 빌드를 테스트할때 유용한 http 서버다. 문서에도 간단히 설명되어 있지만 Express의 심플버전이라고 보면 된다. 결과물을 file로 쓰지 않고 메모리에서 빌드해서 테스트해 볼 수 있다.\n사용법\n먼저 webpack 설정을 다음과 같이 만든다. output.publicPath는 클라이언트가 빌드된 파일에 접근할 수 있도록 서버가 제공할 path이다.\n\u003ccode\u003e// webpack.config.js\n\nv","image":"https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2\u0026fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F215E3F4657D82DA20E"}},"__N_SSG":true},"page":"/tistory/[id]","query":{"id":"435"},"buildId":"k2SjylS4DhAPzPoZgQ49x","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>