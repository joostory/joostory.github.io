{"pageProps":{"post":{"id":"55","date":"2008. 4. 17. 17:20","title":"prototype으로 정의한 method에 setTimeout 설정하기.","content":"javascript 삼매경에 빠져있다.<br><blockquote>\nprocessForm=function(inservleturl) {<br>&nbsp; &nbsp; this.inservleturl = inservleturl;<br>&nbsp; &nbsp; this.submitForm();<br>\n}<br>\n<br>\nprocessForm.prototype.submitForm2=function() {<br>\n}<br>\n<br>\nprocessForm.prototype.submitForm=function() {<br>&nbsp; &nbsp; setTimeout(\"submitStep2()\", 20);<br>\n}</blockquote>현재 이 소스코드에서 submitForm 은 20ms 뒤에 submitStep2() 를 수행하려 할 것이다.<br>그러나 setTimeout은&nbsp; 동기적으로 동작해서 20ms뒤에 submitStep2() 를 수행하려 할 때쯤엔 이미 submitForm method 의 영역을 벗어나서 submitStep2() 를 processForm이 아닌 다른 곳에서 찾으려 할 것이다.<br><br>그렇다면 submitStep2()를 수행하려면 어떻게 해야할까?<br><br>답은 <a href=\"http://bytes.com/forum/thread451446.html\" target=\"_blank\">using setTimeout when using prototype</a> 에서 찾을 수 있었다.<br>마지막 submitForm 을<br><blockquote>processForm.prototype.submitForm=function() {<br>&nbsp; &nbsp; var self = this ;<br>\n &nbsp;&nbsp; setTimeout(function() { self.submitStep2() }, 20);<br>\n\n}</blockquote><br>과 같이 바꾸어 주면 된다.<br>그러면 self는 여전히 processForm을 가리킬 것이고 submitStep2()는 정상적으로 수행된다.<br><br><br>\n            ","summary":"javascript 삼매경에 빠져있다.\nprocessForm=function(inservleturl) {&nbsp; &nbsp; this.inservleturl = inservleturl;&nbsp; &nbsp; this.submitForm();\n}\n\nprocessForm.prototype.submitForm2=function() {\n}\n\nprocessForm.prototype.submitForm=function() {&nbsp; &nbsp; setTi","image":"https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"}},"__N_SSG":true}