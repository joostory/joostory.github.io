<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/favicon.ico"/><meta name="description" content="JooStory.net"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><link rel="canonical" href="https://blog.joostory.net/475"/><title>angular 체험</title><meta property="og:type" content="article"/><meta property="og:title" content="angular 체험"/><meta property="og:description" content="지난 번에 vue.js와 react로 comment sample을 만들었는데 이번엔 angular로 만들어보기로 했다.
AppModule
platform-browser-dynamic를 사용해서 AppModule을 로드하는 main.ts는 건너뛰고 바로 AppModule로 들어간다. angular의 특징은 필요한 component, provider들을 미리 NgModule에 다 적어주고 시작을 해야한다는 거다.
개발을 하면서 component가 하나씩 늘"/><meta property="og:image" content="https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="angular 체험"/><meta name="twitter:description" content="지난 번에 vue.js와 react로 comment sample을 만들었는데 이번엔 angular로 만들어보기로 했다.
AppModule
platform-browser-dynamic를 사용해서 AppModule을 로드하는 main.ts는 건너뛰고 바로 AppModule로 들어간다. angular의 특징은 필요한 component, provider들을 미리 NgModule에 다 적어주고 시작을 해야한다는 거다.
개발을 하면서 component가 하나씩 늘"/><meta property="twitter:image" content="https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/11ae7950df9656c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/11ae7950df9656c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f76bbe1730ea85a1.js" defer=""></script><script src="/_next/static/chunks/494-fa03e5491fc3b3a9.js" defer=""></script><script src="/_next/static/chunks/pages/tistory/%5Bid%5D-571a42114028488a.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_buildManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_ssgManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class=""><div class="pt-40 pb-36 px-20 border-b-[1px] relative"><h1 class="font-bold tracking-tighter leading-tight md:leading-none mb-4 text-center text-3xl">angular 체험</h1><div class="flex justify-center"><em class="text-sm"><time dateTime="2017. 4. 30. 23:57">2017. 4. 30. 23:57</time></em></div></div><div class="w-[650px] pt-10 pb-20 mx-auto"><article class="prose"><p>지난 번에 <a href="http://blog.joostory.net/467">vue.js와 react로 comment sample을 만들었는데</a> 이번엔 <a href="https://angular.io">angular</a>로 만들어보기로 했다.</p>
<h2 id="appmodule">AppModule</h2>
<p>platform-browser-dynamic를 사용해서 <code>AppModule</code>을 로드하는 main.ts는 건너뛰고 바로 <code>AppModule</code>로 들어간다. angular의 특징은 필요한 component, provider들을 미리 <code>NgModule</code>에 다 적어주고 시작을 해야한다는 거다.</p>
<p>개발을 하면서 component가 하나씩 늘어나고 service도 하나씩 늘어날텐데 그때마다 이 파일을 수정해줘야 한다. 중간에 구조를 바꾸면서 <code>CommentFormComponent</code>, <code>CommentService</code>를 추가했는데 여기다가 추가해주는 것은 조금 번거로웠다.</p>
<pre><code>import { NgModule }      from &#39;@angular/core&#39;;
import { BrowserModule } from &#39;@angular/platform-browser&#39;;
import { FormsModule }   from &#39;@angular/forms&#39;;

import { AppComponent }  from &#39;./components/app.component.js&#39;;
import { CommentFormComponent }  from &#39;./components/comment-form.component.js&#39;;
import { CommentService } from &#39;./components/comment.service.js&#39;

@NgModule({
  imports: [ BrowserModule, FormsModule ],
  declarations: [ AppComponent, CommentFormComponent ],
  bootstrap: [ AppComponent ],
  providers: [ CommentService ]
})
export class AppModule { }
</code></pre><h2 id="appcomponent">AppComponent</h2>
<p><code>AppComponent</code>는 bootstrap으로 지정되어 있다. 앱의 시작이라는 말이다. 그래서 그런지 파일이 좀 크다. list도 따로 분리했으면 좀 더 괜찮았을텐데 굳이 나누진 않았다. 그리고 template로 따로 분리했다면 파일이 좀 더 작아졌겠지만 그러지 않았다.</p>
<p>react의 state, prop에 익숙해져서 그런지 angular도 그런식으로 만들려고 했다. &#39;근데 하위 component에 method는 어떻게 넘겨주지?&#39;라는 생각을 했다. 그런데 angular는 data의 관리를 service에 모두 위임한다. <code>constructor</code>가 <code>commentService</code>를 받도록 하고 데이터를 가져올때 <code>commentService</code>를 사용한다. view에서 직접 사용할 data만 component가 가진다.</p>
<pre><code>import { Component, OnInit } from &#39;@angular/core&#39;;
import { Comment } from &#39;./comment.js&#39;
import { CommentService } from &#39;./comment.service.js&#39;

@Component({
  selector: &#39;comment-app&#39;,
  template: `
  &lt;div class=&quot;app&quot;&gt;
    &lt;div&gt;{{count}} Comments&lt;/div&gt;

    &lt;button *ngIf=&quot;hasMore&quot; class=&quot;btn-more&quot; (click)=&quot;onLoadMore()&quot;&gt;more comment&lt;/button&gt;

    &lt;div *ngFor=&quot;let comment of comments&quot;&gt;
      &lt;div class=&quot;comment&quot;&gt;
        &lt;div class=&quot;info&quot;&gt;{{comment.created}}&lt;/div&gt;
        &lt;div class=&quot;message&quot;&gt;{{comment.message}}&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;comment-form&gt;&lt;/comment-form&gt;
  &lt;/div&gt;
  `,
})
export class AppComponent implements OnInit {
  count = 6;
  hasMore = true;
  comments: Comment[];

  constructor(private commentService: CommentService) { }

  ngOnInit() { this.getComments() }

  getComments() {
    this.comments = this.commentService.getComments();
    this.count = this.commentService.getCommentCount();
    this.hasMore = this.count !== this.comments.length;
  }

  onLoadMore() {
    this.commentService.loadMoreComments();
    this.getComments();
  }
}
</code></pre><h2 id="commentservice">CommentService</h2>
<p>CommentService는 <code>@Injectable</code>을 사용해서 Component들에 inject되도록 하고 내부에 실제 data들을 가진다. react로 치면 redux의 reducer의 역할과 비슷하다.</p>
<pre><code>import { Injectable } from &#39;@angular/core&#39;;

import { Comment } from &#39;./comment.js&#39;

@Injectable()
export class CommentService {

  count: number = 6;
  hasMore: any = true;
  comments: Comment[] = [
    {id: 5, message:&#39;Comment 5&#39;, created: new Date(new Date().getTime() - 600000)},
    {id: 6, message:&#39;Comment 6&#39;, created: new Date(new Date().getTime() - 500000)}
  ];

  getCommentCount(): number {
    return this.count
  }

  getComments(): Comment[] {
    return this.comments
  }

  loadMoreComments(): void {
    this.comments = [
      {id: 1, message: &#39;Comment 1&#39;, created: new Date(new Date().getTime() - 1000000)},
      {id: 2, message: &#39;Comment 2&#39;, created: new Date(new Date().getTime() - 900000)},
      {id: 3, message: &#39;Comment 3&#39;, created: new Date(new Date().getTime() - 800000)},
      {id: 4, message: &#39;Comment 4&#39;, created: new Date(new Date().getTime() - 700000)},
      ...this.comments
    ];
  }

  addComment(message: string): void {
    this.comments.push({
      id: this.count + 1,
      message: message,
      created: new Date()
    });
    this.count++;
  }
}
</code></pre><h2 id="commentformcomponent">CommentFormComponent</h2>
<p>CommentFormComponent는 <code>message</code>를 <code>ngModel</code>로 사용해서 <code>CommentService</code>에 새로운 message를 전달한다.</p>
<pre><code>import { Component } from &#39;@angular/core&#39;;
import { Comment } from &#39;./comment.js&#39;
import { CommentService } from &#39;./comment.service.js&#39;

@Component({
  selector: &#39;comment-form&#39;,
  template: `
    &lt;form class=&quot;form&quot; (submit)=&quot;onAdd(message)&quot;&gt;
      &lt;label&gt;message&lt;/label&gt;
      &lt;input [(ngModel)]=&quot;message&quot; name=&quot;message&quot; class=&quot;text&quot; type=&#39;text&#39; /&gt;
      &lt;button type=&#39;submit&#39;&gt;submit&lt;/button&gt;
    &lt;/form&gt;
  `,
})
export class CommentFormComponent {

  message: string = &quot;&quot;;

  constructor(private commentService: CommentService) { }

  onAdd(message: string) {
    this.commentService.addComment(message);
    this.message = &quot;&quot;;
  }
}
</code></pre><hr>
<p>angular를 시작하는 것은 아주 멀고 멀었다. 시간을 들여서 하나하나 보다보니 그래도 뭔가 만들만한 수준으로 이해가 되긴 한다. 그런데 아직 production level로 사용하려면 어떻게 해야하는지 감이 안온다. 지금 코드도 dynamic으로 로드하고 있어서 수많은 js파일을 실시간으로 로드하는 것이다. 이런 부분에서 공식 문서에서 답을 찾기가 어렵다. 너무 당연하고 쉬운 방법이라 굳이 쓸 필요가 없었을까? 잘 모르겠다.</p>
<p>좋은 점이라면 그나마 vue.js보다는 코드 자체가 이해하기 쉬운형태이고... 아니다. 다시 처음시작하는 사람의 마음으로 보니 그렇지 않다. 매우매우 어렵다. 일단 typescript를 완전히 마스터하지 않는다면 angular는 시작할 생각도 하지 않는 것이 좋아보인다. typescript는 좋지만 너무 어렵다.</p>
<p>일단 샘플코드를 만들기는 했지만 과연 angular를 production으로 사용하는 곳이 많이 있을까싶다. 조금 더 알아보기는 하겠지만 난 react를 계속 할 것 같다.</p>
            </article></div></div></main></div><footer class="bg-slate-100 border-t border-accent-2 mt-6"><div class="py-4 flex flex-col items-center justify-center text-xs text-slate-500"><a href="https://twitter.com/@JooStory">@JooStory</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"475","date":"2017. 4. 30. 23:57","title":"angular 체험","content":"\u003cp\u003e지난 번에 \u003ca href=\"http://blog.joostory.net/467\"\u003evue.js와 react로 comment sample을 만들었는데\u003c/a\u003e 이번엔 \u003ca href=\"https://angular.io\"\u003eangular\u003c/a\u003e로 만들어보기로 했다.\u003c/p\u003e\n\u003ch2 id=\"appmodule\"\u003eAppModule\u003c/h2\u003e\n\u003cp\u003eplatform-browser-dynamic를 사용해서 \u003ccode\u003eAppModule\u003c/code\u003e을 로드하는 main.ts는 건너뛰고 바로 \u003ccode\u003eAppModule\u003c/code\u003e로 들어간다. angular의 특징은 필요한 component, provider들을 미리 \u003ccode\u003eNgModule\u003c/code\u003e에 다 적어주고 시작을 해야한다는 거다.\u003c/p\u003e\n\u003cp\u003e개발을 하면서 component가 하나씩 늘어나고 service도 하나씩 늘어날텐데 그때마다 이 파일을 수정해줘야 한다. 중간에 구조를 바꾸면서 \u003ccode\u003eCommentFormComponent\u003c/code\u003e, \u003ccode\u003eCommentService\u003c/code\u003e를 추가했는데 여기다가 추가해주는 것은 조금 번거로웠다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { NgModule }      from \u0026#39;@angular/core\u0026#39;;\nimport { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;;\nimport { FormsModule }   from \u0026#39;@angular/forms\u0026#39;;\n\nimport { AppComponent }  from \u0026#39;./components/app.component.js\u0026#39;;\nimport { CommentFormComponent }  from \u0026#39;./components/comment-form.component.js\u0026#39;;\nimport { CommentService } from \u0026#39;./components/comment.service.js\u0026#39;\n\n@NgModule({\n  imports: [ BrowserModule, FormsModule ],\n  declarations: [ AppComponent, CommentFormComponent ],\n  bootstrap: [ AppComponent ],\n  providers: [ CommentService ]\n})\nexport class AppModule { }\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"appcomponent\"\u003eAppComponent\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eAppComponent\u003c/code\u003e는 bootstrap으로 지정되어 있다. 앱의 시작이라는 말이다. 그래서 그런지 파일이 좀 크다. list도 따로 분리했으면 좀 더 괜찮았을텐데 굳이 나누진 않았다. 그리고 template로 따로 분리했다면 파일이 좀 더 작아졌겠지만 그러지 않았다.\u003c/p\u003e\n\u003cp\u003ereact의 state, prop에 익숙해져서 그런지 angular도 그런식으로 만들려고 했다. \u0026#39;근데 하위 component에 method는 어떻게 넘겨주지?\u0026#39;라는 생각을 했다. 그런데 angular는 data의 관리를 service에 모두 위임한다. \u003ccode\u003econstructor\u003c/code\u003e가 \u003ccode\u003ecommentService\u003c/code\u003e를 받도록 하고 데이터를 가져올때 \u003ccode\u003ecommentService\u003c/code\u003e를 사용한다. view에서 직접 사용할 data만 component가 가진다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { Component, OnInit } from \u0026#39;@angular/core\u0026#39;;\nimport { Comment } from \u0026#39;./comment.js\u0026#39;\nimport { CommentService } from \u0026#39;./comment.service.js\u0026#39;\n\n@Component({\n  selector: \u0026#39;comment-app\u0026#39;,\n  template: `\n  \u0026lt;div class=\u0026quot;app\u0026quot;\u0026gt;\n    \u0026lt;div\u0026gt;{{count}} Comments\u0026lt;/div\u0026gt;\n\n    \u0026lt;button *ngIf=\u0026quot;hasMore\u0026quot; class=\u0026quot;btn-more\u0026quot; (click)=\u0026quot;onLoadMore()\u0026quot;\u0026gt;more comment\u0026lt;/button\u0026gt;\n\n    \u0026lt;div *ngFor=\u0026quot;let comment of comments\u0026quot;\u0026gt;\n      \u0026lt;div class=\u0026quot;comment\u0026quot;\u0026gt;\n        \u0026lt;div class=\u0026quot;info\u0026quot;\u0026gt;{{comment.created}}\u0026lt;/div\u0026gt;\n        \u0026lt;div class=\u0026quot;message\u0026quot;\u0026gt;{{comment.message}}\u0026lt;/div\u0026gt;\n      \u0026lt;/div\u0026gt;\n    \u0026lt;/div\u0026gt;\n\n    \u0026lt;comment-form\u0026gt;\u0026lt;/comment-form\u0026gt;\n  \u0026lt;/div\u0026gt;\n  `,\n})\nexport class AppComponent implements OnInit {\n  count = 6;\n  hasMore = true;\n  comments: Comment[];\n\n  constructor(private commentService: CommentService) { }\n\n  ngOnInit() { this.getComments() }\n\n  getComments() {\n    this.comments = this.commentService.getComments();\n    this.count = this.commentService.getCommentCount();\n    this.hasMore = this.count !== this.comments.length;\n  }\n\n  onLoadMore() {\n    this.commentService.loadMoreComments();\n    this.getComments();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"commentservice\"\u003eCommentService\u003c/h2\u003e\n\u003cp\u003eCommentService는 \u003ccode\u003e@Injectable\u003c/code\u003e을 사용해서 Component들에 inject되도록 하고 내부에 실제 data들을 가진다. react로 치면 redux의 reducer의 역할과 비슷하다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { Injectable } from \u0026#39;@angular/core\u0026#39;;\n\nimport { Comment } from \u0026#39;./comment.js\u0026#39;\n\n@Injectable()\nexport class CommentService {\n\n  count: number = 6;\n  hasMore: any = true;\n  comments: Comment[] = [\n    {id: 5, message:\u0026#39;Comment 5\u0026#39;, created: new Date(new Date().getTime() - 600000)},\n    {id: 6, message:\u0026#39;Comment 6\u0026#39;, created: new Date(new Date().getTime() - 500000)}\n  ];\n\n  getCommentCount(): number {\n    return this.count\n  }\n\n  getComments(): Comment[] {\n    return this.comments\n  }\n\n  loadMoreComments(): void {\n    this.comments = [\n      {id: 1, message: \u0026#39;Comment 1\u0026#39;, created: new Date(new Date().getTime() - 1000000)},\n      {id: 2, message: \u0026#39;Comment 2\u0026#39;, created: new Date(new Date().getTime() - 900000)},\n      {id: 3, message: \u0026#39;Comment 3\u0026#39;, created: new Date(new Date().getTime() - 800000)},\n      {id: 4, message: \u0026#39;Comment 4\u0026#39;, created: new Date(new Date().getTime() - 700000)},\n      ...this.comments\n    ];\n  }\n\n  addComment(message: string): void {\n    this.comments.push({\n      id: this.count + 1,\n      message: message,\n      created: new Date()\n    });\n    this.count++;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"commentformcomponent\"\u003eCommentFormComponent\u003c/h2\u003e\n\u003cp\u003eCommentFormComponent는 \u003ccode\u003emessage\u003c/code\u003e를 \u003ccode\u003engModel\u003c/code\u003e로 사용해서 \u003ccode\u003eCommentService\u003c/code\u003e에 새로운 message를 전달한다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eimport { Component } from \u0026#39;@angular/core\u0026#39;;\nimport { Comment } from \u0026#39;./comment.js\u0026#39;\nimport { CommentService } from \u0026#39;./comment.service.js\u0026#39;\n\n@Component({\n  selector: \u0026#39;comment-form\u0026#39;,\n  template: `\n    \u0026lt;form class=\u0026quot;form\u0026quot; (submit)=\u0026quot;onAdd(message)\u0026quot;\u0026gt;\n      \u0026lt;label\u0026gt;message\u0026lt;/label\u0026gt;\n      \u0026lt;input [(ngModel)]=\u0026quot;message\u0026quot; name=\u0026quot;message\u0026quot; class=\u0026quot;text\u0026quot; type=\u0026#39;text\u0026#39; /\u0026gt;\n      \u0026lt;button type=\u0026#39;submit\u0026#39;\u0026gt;submit\u0026lt;/button\u0026gt;\n    \u0026lt;/form\u0026gt;\n  `,\n})\nexport class CommentFormComponent {\n\n  message: string = \u0026quot;\u0026quot;;\n\n  constructor(private commentService: CommentService) { }\n\n  onAdd(message: string) {\n    this.commentService.addComment(message);\n    this.message = \u0026quot;\u0026quot;;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003chr\u003e\n\u003cp\u003eangular를 시작하는 것은 아주 멀고 멀었다. 시간을 들여서 하나하나 보다보니 그래도 뭔가 만들만한 수준으로 이해가 되긴 한다. 그런데 아직 production level로 사용하려면 어떻게 해야하는지 감이 안온다. 지금 코드도 dynamic으로 로드하고 있어서 수많은 js파일을 실시간으로 로드하는 것이다. 이런 부분에서 공식 문서에서 답을 찾기가 어렵다. 너무 당연하고 쉬운 방법이라 굳이 쓸 필요가 없었을까? 잘 모르겠다.\u003c/p\u003e\n\u003cp\u003e좋은 점이라면 그나마 vue.js보다는 코드 자체가 이해하기 쉬운형태이고... 아니다. 다시 처음시작하는 사람의 마음으로 보니 그렇지 않다. 매우매우 어렵다. 일단 typescript를 완전히 마스터하지 않는다면 angular는 시작할 생각도 하지 않는 것이 좋아보인다. typescript는 좋지만 너무 어렵다.\u003c/p\u003e\n\u003cp\u003e일단 샘플코드를 만들기는 했지만 과연 angular를 production으로 사용하는 곳이 많이 있을까싶다. 조금 더 알아보기는 하겠지만 난 react를 계속 할 것 같다.\u003c/p\u003e\n            ","summary":"지난 번에 vue.js와 react로 comment sample을 만들었는데 이번엔 angular로 만들어보기로 했다.\nAppModule\nplatform-browser-dynamic를 사용해서 AppModule을 로드하는 main.ts는 건너뛰고 바로 AppModule로 들어간다. angular의 특징은 필요한 component, provider들을 미리 NgModule에 다 적어주고 시작을 해야한다는 거다.\n개발을 하면서 component가 하나씩 늘","image":"https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"}},"__N_SSG":true},"page":"/tistory/[id]","query":{"id":"475"},"buildId":"k2SjylS4DhAPzPoZgQ49x","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>