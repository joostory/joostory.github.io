{"pageProps":{"post":{"id":"333","date":"2011. 12. 3. 01:20","title":"node.js + express + jqtpl","content":"요즘 신기술이 넘쳐나고 있는데 나는 구닥다리 기술만 쓰고 있다는 생각이 들었다.<br>\n심지어 얼마전에야 ruby on rails, android를 알았다. -_-; 반성하자.<br>\n<br>\n그래서 새로운 기술들만 써서 뭔가를 만들어보기로 했다.<br>\n오늘은 그 시작인 node.js로 웹서비스 만들기.<br>\n<br>\n<h3>node.js</h3>\n<a title=\"[http://nodejs.org]로 이동합니다.\" target=\"_blank\" href=\"http://nodejs.org\">node.js</a>는 v8 엔진을 통해 브라우저 밖에서 javascript를 사용할 수 있게 했다.<br>\n요즘 대세라고 할 수 있겠다.<br>\n설치는 아주 쉽다.<br>\n<blockquote class=\"brush:perl\">$ ./configure --prefix=/usr/local<br>\n$ sudo make install</blockquote><br>\n추가 모듈의 설치도 npm을 통해서 쉽게 할 수 있다.<br>\n<blockquote class=\"brush:perl\">$ npm install [설치할 모듈명]</blockquote><br>\n간단한 서버를 만드는 방법은 쉽지만 웹서비스를 만들기 위해서는 url을 적절한 함수로 연결해주어야 하는데 이 부분은 node.js에서 제공하고 있지는 않다. 그래서 rails 같이 url을 연결해주는 녀석을 찾았는데 바로 express이다.<br>\n<br>\n<br>\n<h3>express</h3><a title=\"[http://expressjs.com/]로 이동합니다.\" target=\"_blank\" href=\"http://expressjs.com/\">express</a>는 node.js로 웹서비스를 쉽게 만들수 있도록 도와준다.<br>\n닥치고 설치(? ^^;)부터 하는 스타일이라 일단 설치!<br>\n설치는 npm을 사용해서 하면 되는데 -g 옵션을 주면 좀 더 편하게 쓸 수 있다. (PATH를 자동으로 걸어줘서)<br>\n<blockquote class=\"brush:perl\">$ sudo npm install express -g</blockquote><br>\n자! 이제 프로젝트를 하나 만들어서 실행해보자.<br>\nexpress는 뭔가 rails 비스무레한 방법을 사용하는데 역시 간단하다.<br>\n<blockquote class=\"brush:perl\">$ express hello&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # hello 라는 express 프로젝트 생성<br>\n$ cd hello<br>\n$ npm install -d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # hello에 필요한 모듈 설치<br>\n$ node app.js&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # hello 웹서비스 시작<br>\n</blockquote><br>\n개발 외적인 것들을 이렇게 편하게 만들어주니 개발자로서는 아주 좋다. 개발에만 전념할 수 있으니까.<br>\n<br>\n그런데 여기까지는 참 좋았는데 문제가 하나 생겼다.<br>\nexpress는 <a title=\"[http://jade-lang.com/]로 이동합니다.\" target=\"_blank\" href=\"http://jade-lang.com/\">jade</a>라는 template engine을 사용하고 있었다.<br>\n설명하기로는 사용하기 쉽고 성능이 좋다는데 이게 어딜봐서 사용하기 쉽나!!<br>\n완전히 새로운 언어구만...<br>\n<blockquote class=\"brush:javascript\">!!!<br>\nhtml<br>\n&nbsp; head<br>\n&nbsp;&nbsp;&nbsp; title= title<br>\n&nbsp;&nbsp;&nbsp; link(rel='stylesheet', href='/stylesheets/style.css')<br>\n&nbsp; body!= body</blockquote><br>\n그래서 다른 engine이 없나 찾아봤다. 역시 <a title=\"[http://expressjs.com/guide.html#template-engines]로 이동합니다.\" target=\"_blank\" href=\"http://expressjs.com/guide.html#template-engines\">다른 engine으로 교체가 가능</a>했다.<br>\nHaml, Jade, EJS, CoffeCup, jQuery Template 총 5개가 사용가능했는데 Haml, Jade는 비슷한 놈이고 CoffeCup도 가만보니 coffe script를 또 배워야 하는거고 그래서 jQuery Template를 써보기로 했다.<br>\n(근데 생각해보니 새로운거 써보기로 하고 이거 하는건데 걍 jade쓸까? ^^;;)<br>\n<br>\n<br>\n<h3>jQuery Template</h3>\n<a title=\"[https://github.com/kof/node-jqtpl]로 이동합니다.\" target=\"_blank\" href=\"https://github.com/kof/node-jqtpl\">jQuery Template</a>(jqtpl)는 jQuery에서 template쓰듯이 쓸 수 있다. 아주 익숙한 방법으로..<br>\n먼저 사용하기 위해서는 기본 설정인 jade를 jqtpl로 바꿔야 한다.<br>\napp.js 에서 view engine을 jqtpl로 바꾸는 방법이다.<br>\n<blockquote class=\"brush:javascript\">app.configure(function(){<br>\n&nbsp; app.set('views', __dirname + '/views');<br>\n<br>\n&nbsp; // jade를 삭제하고 .html 파일에서 jqtpl을 require한다.<br>\n&nbsp; // app.set('view engine', 'jade');<br>\n&nbsp; app.set('view engine', 'html');<br>\n&nbsp; app.register(\".html\", require(\"jqtpl\").express);<br>\n<br>\n&nbsp; app.use(express.bodyParser());<br>\n&nbsp; app.use(express.methodOverride());<br>\n&nbsp; app.use(app.router);<br>\n&nbsp; app.use(express.static(__dirname + '/public'));<br>\n});</blockquote><br>\n자, 이제 당황스러운 문법의 jade보다는 훨씬 익숙하고 쉽게 view를 구성할 수 있다.<br>\nlayout을 써서 hello 페이지를 만들었다.<br>\n<blockquote class=\"brush:html\">// layout.html<br>\n&lt;!doctype html&gt;<br>\n&lt;html&gt;<br>\n&lt;head&gt;<br>\n&nbsp;&nbsp;&nbsp; &lt;meta charset='utf-8'&gt;<br>\n&nbsp;&nbsp;&nbsp; &lt;title&gt;${title}&lt;/title&gt;<br>\n&lt;/head&gt;<br>\n&lt;body&gt;<br>\n&nbsp;&nbsp;&nbsp; &lt;h1&gt;${title}&lt;/h1&gt;<br>\n&nbsp;&nbsp;&nbsp; {{html body}}<br>\n&lt;/body&gt;<br>\n&lt;/html&gt;<br>\n<br>\n// index.html<br>\n{{layout \"layout\"}}<br>\n&lt;p&gt;Hello&lt;/p&gt;</blockquote><br>\n이제 준비는 모두 끝났고, 잘 만들어보면 되겠다.<br>\n아! DB가 남았구나. MongoDB를 생각하고 있긴하지만 다른 더 좋은 것이 있다면 그걸 쓸 생각.<br>\n<br>\n끄~~읕.<br>\n<br>            ","summary":"요즘 신기술이 넘쳐나고 있는데 나는 구닥다리 기술만 쓰고 있다는 생각이 들었다.\n심지어 얼마전에야 ruby on rails, android를 알았다. -_-; 반성하자.\n\n그래서 새로운 기술들만 써서 뭔가를 만들어보기로 했다.\n오늘은 그 시작인 node.js로 웹서비스 만들기.\n\nnode.js\nnode.js는 v8 엔진을 통해 브라우저 밖에서 javascript를 사용할 수 있게 했다.\n요즘 대세라고 할 수 있겠다.\n설치는 아주 쉽다.\n$ ./confi","image":"https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"}},"__N_SSG":true}