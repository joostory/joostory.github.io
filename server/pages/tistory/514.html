<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/favicon.ico"/><meta name="description" content="JooStory.net"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><link rel="canonical" href="https://blog.joostory.net/514"/><title>Google Photos Plugin</title><meta property="og:type" content="article"/><meta property="og:title" content="Google Photos Plugin"/><meta property="og:description" content="Dropbox의 등장 이후로 사진을 찍으면 PC에서도 바로 그 사진을 볼 수 있고 다른 기계를 사용해도 마찬가지로 사진을 볼 수 있는 것이 당연하게 되었다. Dropbox가 촬영한 사진을 모든 기계에 동기화해주기 때문이었다. (이것은 안드로이드에서고 아이폰은 아이클라우드에서 이렇게 된다)
이렇게 좋은 Dropbox에도 단점이 있다. 고작 5GB밖에 무료로 제공하지 않는다는 거다. 한달에 만원정도 지불하면 무제한 용량을 사용할 수 있기는 한데 한번 쓰기시"/><meta property="og:image" content="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99349C3359FC557535"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Google Photos Plugin"/><meta name="twitter:description" content="Dropbox의 등장 이후로 사진을 찍으면 PC에서도 바로 그 사진을 볼 수 있고 다른 기계를 사용해도 마찬가지로 사진을 볼 수 있는 것이 당연하게 되었다. Dropbox가 촬영한 사진을 모든 기계에 동기화해주기 때문이었다. (이것은 안드로이드에서고 아이폰은 아이클라우드에서 이렇게 된다)
이렇게 좋은 Dropbox에도 단점이 있다. 고작 5GB밖에 무료로 제공하지 않는다는 거다. 한달에 만원정도 지불하면 무제한 용량을 사용할 수 있기는 한데 한번 쓰기시"/><meta property="twitter:image" content="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&amp;fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99349C3359FC557535"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/11ae7950df9656c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/11ae7950df9656c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f76bbe1730ea85a1.js" defer=""></script><script src="/_next/static/chunks/494-fa03e5491fc3b3a9.js" defer=""></script><script src="/_next/static/chunks/pages/tistory/%5Bid%5D-571a42114028488a.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_buildManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_ssgManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class=""><div class="pt-40 pb-36 px-20 border-b-[1px] relative"><h1 class="font-bold tracking-tighter leading-tight md:leading-none mb-4 text-center text-3xl">Google Photos Plugin</h1><div class="flex justify-center"><em class="text-sm"><time dateTime="2017. 11. 3. 17:23">2017. 11. 3. 17:23</time></em></div></div><div class="w-[650px] pt-10 pb-20 mx-auto"><article class="prose"><p>Dropbox의 등장 이후로 사진을 찍으면 PC에서도 바로 그 사진을 볼 수 있고 다른 기계를 사용해도 마찬가지로 사진을 볼 수 있는 것이 당연하게 되었다. Dropbox가 촬영한 사진을 모든 기계에 동기화해주기 때문이었다. (이것은 안드로이드에서고 아이폰은 아이클라우드에서 이렇게 된다)</p>
<p>이렇게 좋은 Dropbox에도 단점이 있다. 고작 5GB밖에 무료로 제공하지 않는다는 거다. 한달에 만원정도 지불하면 무제한 용량을 사용할 수 있기는 한데 한번 쓰기시작하면 멈추기 쉽지 않기때문에 망설여진다.</p>
<p>구글도 구글 드라이브라는 것으로 이 시장에 진출을 했는데 한발 더 나갔다. Photos라는 어마무시한 서비스를 출시한거다. 피카사의 뒤를 잇는 제품인데 구글 드라이브와 연동이 되는데다가 용량이 무제한이다. 물론 무제한 플랜에서는 이미지가 변형되긴하지만 그게 어딘가. 이제 나의 사진관리는 Photos가 모두 담당하게 되었다.</p>
<p>Photos에도 단점이 있기는 하다. 동기화된 사진을 사용하기가 번거롭다는 거다. pc에 다운로드 되는 것이 아니고 웹에서 관리되다보니 다른 곳에 사용하려면 다운로드받은 후에 다시 업로드하거나 Photos 그 자체를 공유해야한다. 티스토리에 사진을 넣기 위해서도 다운로드 후 업로드해야한다. 이런 번거로움 때문에 Photos Plugin이 시작되었다.</p>
<h2 id="picasa-web-albums-data-api">Picasa Web Albums Data API</h2>
<p><a href="https://developers.google.com/picasa-web/">Picasa Web Albums Data API</a>는 예전에 구글이 Picasa를 서비스할때 사용할 수 있던 API이다. 서비스가 Photos로 바뀐 뒤에도 API는 바뀌지 않았는데 그래서 그런지 응답 type이 XML뿐이다. ;;</p>
<p>API를 사용하기 위해선 먼저 구글 OAuth2를 통해 access token을 받아야 한다. 이 때 Picasa의 scope을 사용해야 하는데 그 값은 <code>https://picasaweb.google.com/data/</code>다. 자세한 내용은 영어지만 <a href="https://developers.google.com/picasa-web/docs/3.0/developers_guide_protocol">문서</a>에 자세히 정리되어 있다.</p>
<p>API에서 <code>userID</code>를 사용해야 하는데 이를 위해서 구글 userinfo를 또 가져와야하느냐? 그렇지 않다. <code>default</code>라는 값을 사용하면 현재 로그인한 사용자의 <code>userID</code>를 대신할 수 있다.</p>
<h2 id="ui-">UI 구성</h2>
<p>사진을 가져와서 본문에 넣기만 할 것이기 때문에 UI도 단순하고, 사용하는 API도 simple하다.</p>
<p><img src="https://t1.daumcdn.net/cfile/tistory/99349C3359FC557535" alt=""></p>
<p>먼저 인증 화면이다. request를 날렸을때 200 응답이 오지 않는다면 인증에 문제가 생겼다고 판단하고 인증화면을 보여준다. 물론 access token이 없을때도 이 화면이 나온다.</p>
<p><img src="https://t1.daumcdn.net/cfile/tistory/99EA493359FC560B16" alt=""></p>
<p>티스토리 인증에서 사용했던 <a href="https://github.com/mawie81/electron-oauth2">electron-oauth2</a>를 사용하였기 때문에 거의 비슷하다. 새로운 window가 떠서 인증을 마치면 window는 닫히고 access token을 가져온다.</p>
<p><img src="https://t1.daumcdn.net/cfile/tistory/99A6D23359FC572C0D" alt=""></p>
<p>인증을 정상적으로 완료하면 <a href="https://developers.google.com/picasa-web/docs/3.0/developers_guide_protocol#ListAlbums">album API</a>를 호출해서 album 리스트를 보여준다. <code>feed/entry</code>가 album 데이터이고 <code>title</code>, <code>summary</code>로 아래 텍스트를 <code>media:group/media:thumbnail</code>로 썸네일을 보여준다.</p>
<p>리스트 첫번째에 <code>Auto Backup</code>이라는 앨범이 보일텐데 이것이 폰에서 찍은 사진이 자동으로 업로드 되는 곳이다. 바로 이 곳의 사진리스트부터 보여줄까도 생각했지만 앨범을 잘 관리하는 사람이 있을 수도 있으니 일단 앨범 리스트를 보여줘본다.</p>
<p><img src="https://t1.daumcdn.net/cfile/tistory/991EE13359FC58C204" alt=""></p>
<p>앨범을 선택하면 <a href="https://developers.google.com/picasa-web/docs/3.0/developers_guide_protocol#ListPhotos">사진 API</a>를 호출해서 사진 리스트를 보여준다. <code>feed/entry</code>가 album 데이터이고 <code>title</code>, <code>summary</code>로 아래 텍스트를 <code>content</code>로 썸네일을 보여준다.</p>
<p>Photos에는 동영상도 업로드되는데 동영상은 본문에 넣기가 곤란하다. 그래서 동영상만 빼고 보여주고 싶다. <code>gphoto:videostatus</code>라는 것은 동영상에만 존재하니 이 값이 있으면 뺐다. 사진을 선택했을때는 <code>content</code>값을 본문에 넣는다. 아쉽게도 굉장히 저용량 사진이다. 그래도 그럭저럭 보기에는 충분하다.</p>
<hr>
<p>이렇게 Google Photos에 업로드한 사진을 본문에 넣는 플러그인이 만들어졌다. 하는 김에 Markdown 에디터에 툴바도 넣어봤다.</p>
<p><img src="https://t1.daumcdn.net/cfile/tistory/99B3243359FC5B082A" alt=""></p>
<p>이렇게 하고 싶은 것을 그럭저럭 끝냈으니 미루고 미룬 여행 기록이나 정리해봐야겠다. :)</p>
            </article></div></div></main></div><footer class="bg-slate-100 border-t border-accent-2 mt-6"><div class="py-4 flex flex-col items-center justify-center text-xs text-slate-500"><a href="https://twitter.com/@JooStory">@JooStory</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"514","date":"2017. 11. 3. 17:23","title":"Google Photos Plugin","content":"\u003cp\u003eDropbox의 등장 이후로 사진을 찍으면 PC에서도 바로 그 사진을 볼 수 있고 다른 기계를 사용해도 마찬가지로 사진을 볼 수 있는 것이 당연하게 되었다. Dropbox가 촬영한 사진을 모든 기계에 동기화해주기 때문이었다. (이것은 안드로이드에서고 아이폰은 아이클라우드에서 이렇게 된다)\u003c/p\u003e\n\u003cp\u003e이렇게 좋은 Dropbox에도 단점이 있다. 고작 5GB밖에 무료로 제공하지 않는다는 거다. 한달에 만원정도 지불하면 무제한 용량을 사용할 수 있기는 한데 한번 쓰기시작하면 멈추기 쉽지 않기때문에 망설여진다.\u003c/p\u003e\n\u003cp\u003e구글도 구글 드라이브라는 것으로 이 시장에 진출을 했는데 한발 더 나갔다. Photos라는 어마무시한 서비스를 출시한거다. 피카사의 뒤를 잇는 제품인데 구글 드라이브와 연동이 되는데다가 용량이 무제한이다. 물론 무제한 플랜에서는 이미지가 변형되긴하지만 그게 어딘가. 이제 나의 사진관리는 Photos가 모두 담당하게 되었다.\u003c/p\u003e\n\u003cp\u003ePhotos에도 단점이 있기는 하다. 동기화된 사진을 사용하기가 번거롭다는 거다. pc에 다운로드 되는 것이 아니고 웹에서 관리되다보니 다른 곳에 사용하려면 다운로드받은 후에 다시 업로드하거나 Photos 그 자체를 공유해야한다. 티스토리에 사진을 넣기 위해서도 다운로드 후 업로드해야한다. 이런 번거로움 때문에 Photos Plugin이 시작되었다.\u003c/p\u003e\n\u003ch2 id=\"picasa-web-albums-data-api\"\u003ePicasa Web Albums Data API\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://developers.google.com/picasa-web/\"\u003ePicasa Web Albums Data API\u003c/a\u003e는 예전에 구글이 Picasa를 서비스할때 사용할 수 있던 API이다. 서비스가 Photos로 바뀐 뒤에도 API는 바뀌지 않았는데 그래서 그런지 응답 type이 XML뿐이다. ;;\u003c/p\u003e\n\u003cp\u003eAPI를 사용하기 위해선 먼저 구글 OAuth2를 통해 access token을 받아야 한다. 이 때 Picasa의 scope을 사용해야 하는데 그 값은 \u003ccode\u003ehttps://picasaweb.google.com/data/\u003c/code\u003e다. 자세한 내용은 영어지만 \u003ca href=\"https://developers.google.com/picasa-web/docs/3.0/developers_guide_protocol\"\u003e문서\u003c/a\u003e에 자세히 정리되어 있다.\u003c/p\u003e\n\u003cp\u003eAPI에서 \u003ccode\u003euserID\u003c/code\u003e를 사용해야 하는데 이를 위해서 구글 userinfo를 또 가져와야하느냐? 그렇지 않다. \u003ccode\u003edefault\u003c/code\u003e라는 값을 사용하면 현재 로그인한 사용자의 \u003ccode\u003euserID\u003c/code\u003e를 대신할 수 있다.\u003c/p\u003e\n\u003ch2 id=\"ui-\"\u003eUI 구성\u003c/h2\u003e\n\u003cp\u003e사진을 가져와서 본문에 넣기만 할 것이기 때문에 UI도 단순하고, 사용하는 API도 simple하다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://t1.daumcdn.net/cfile/tistory/99349C3359FC557535\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e먼저 인증 화면이다. request를 날렸을때 200 응답이 오지 않는다면 인증에 문제가 생겼다고 판단하고 인증화면을 보여준다. 물론 access token이 없을때도 이 화면이 나온다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://t1.daumcdn.net/cfile/tistory/99EA493359FC560B16\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e티스토리 인증에서 사용했던 \u003ca href=\"https://github.com/mawie81/electron-oauth2\"\u003eelectron-oauth2\u003c/a\u003e를 사용하였기 때문에 거의 비슷하다. 새로운 window가 떠서 인증을 마치면 window는 닫히고 access token을 가져온다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://t1.daumcdn.net/cfile/tistory/99A6D23359FC572C0D\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e인증을 정상적으로 완료하면 \u003ca href=\"https://developers.google.com/picasa-web/docs/3.0/developers_guide_protocol#ListAlbums\"\u003ealbum API\u003c/a\u003e를 호출해서 album 리스트를 보여준다. \u003ccode\u003efeed/entry\u003c/code\u003e가 album 데이터이고 \u003ccode\u003etitle\u003c/code\u003e, \u003ccode\u003esummary\u003c/code\u003e로 아래 텍스트를 \u003ccode\u003emedia:group/media:thumbnail\u003c/code\u003e로 썸네일을 보여준다.\u003c/p\u003e\n\u003cp\u003e리스트 첫번째에 \u003ccode\u003eAuto Backup\u003c/code\u003e이라는 앨범이 보일텐데 이것이 폰에서 찍은 사진이 자동으로 업로드 되는 곳이다. 바로 이 곳의 사진리스트부터 보여줄까도 생각했지만 앨범을 잘 관리하는 사람이 있을 수도 있으니 일단 앨범 리스트를 보여줘본다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://t1.daumcdn.net/cfile/tistory/991EE13359FC58C204\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e앨범을 선택하면 \u003ca href=\"https://developers.google.com/picasa-web/docs/3.0/developers_guide_protocol#ListPhotos\"\u003e사진 API\u003c/a\u003e를 호출해서 사진 리스트를 보여준다. \u003ccode\u003efeed/entry\u003c/code\u003e가 album 데이터이고 \u003ccode\u003etitle\u003c/code\u003e, \u003ccode\u003esummary\u003c/code\u003e로 아래 텍스트를 \u003ccode\u003econtent\u003c/code\u003e로 썸네일을 보여준다.\u003c/p\u003e\n\u003cp\u003ePhotos에는 동영상도 업로드되는데 동영상은 본문에 넣기가 곤란하다. 그래서 동영상만 빼고 보여주고 싶다. \u003ccode\u003egphoto:videostatus\u003c/code\u003e라는 것은 동영상에만 존재하니 이 값이 있으면 뺐다. 사진을 선택했을때는 \u003ccode\u003econtent\u003c/code\u003e값을 본문에 넣는다. 아쉽게도 굉장히 저용량 사진이다. 그래도 그럭저럭 보기에는 충분하다.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e이렇게 Google Photos에 업로드한 사진을 본문에 넣는 플러그인이 만들어졌다. 하는 김에 Markdown 에디터에 툴바도 넣어봤다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://t1.daumcdn.net/cfile/tistory/99B3243359FC5B082A\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e이렇게 하고 싶은 것을 그럭저럭 끝냈으니 미루고 미룬 여행 기록이나 정리해봐야겠다. :)\u003c/p\u003e\n            ","summary":"Dropbox의 등장 이후로 사진을 찍으면 PC에서도 바로 그 사진을 볼 수 있고 다른 기계를 사용해도 마찬가지로 사진을 볼 수 있는 것이 당연하게 되었다. Dropbox가 촬영한 사진을 모든 기계에 동기화해주기 때문이었다. (이것은 안드로이드에서고 아이폰은 아이클라우드에서 이렇게 된다)\n이렇게 좋은 Dropbox에도 단점이 있다. 고작 5GB밖에 무료로 제공하지 않는다는 거다. 한달에 만원정도 지불하면 무제한 용량을 사용할 수 있기는 한데 한번 쓰기시","image":"https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2\u0026fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99349C3359FC557535"}},"__N_SSG":true},"page":"/tistory/[id]","query":{"id":"514"},"buildId":"k2SjylS4DhAPzPoZgQ49x","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>