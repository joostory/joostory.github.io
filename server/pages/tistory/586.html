<!DOCTYPE html><html lang="ko"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/favicon.ico"/><meta name="description" content="JooStory.net"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><link rel="canonical" href="https://blog.joostory.net/586"/><title>Google Actions를 이용한 flutter 앱 배포</title><meta property="og:type" content="article"/><meta property="og:title" content="Google Actions를 이용한 flutter 앱 배포"/><meta property="og:description" content="electron, npm 배포에 이어 flutter 앱도 Github Actions로 배포를 해보기로 했다.
flutter 빌드를 위해서 필요한 것은 의외로 단순하다. java, flutter 가 전부다. ios 빌드를 위해서는 os를 macos로 하는 것이 필요하겠지만 일단은 android로만 빌드하기 때문에 ubuntu로 했다.
&lt;code&gt;- uses: subosito/flutter-action@v1
  with:
    channel: &amp;#39;s"/><meta property="og:image" content="https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Google Actions를 이용한 flutter 앱 배포"/><meta name="twitter:description" content="electron, npm 배포에 이어 flutter 앱도 Github Actions로 배포를 해보기로 했다.
flutter 빌드를 위해서 필요한 것은 의외로 단순하다. java, flutter 가 전부다. ios 빌드를 위해서는 os를 macos로 하는 것이 필요하겠지만 일단은 android로만 빌드하기 때문에 ubuntu로 했다.
&lt;code&gt;- uses: subosito/flutter-action@v1
  with:
    channel: &amp;#39;s"/><meta property="twitter:image" content="https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/11ae7950df9656c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/11ae7950df9656c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f76bbe1730ea85a1.js" defer=""></script><script src="/_next/static/chunks/494-fa03e5491fc3b3a9.js" defer=""></script><script src="/_next/static/chunks/pages/tistory/%5Bid%5D-571a42114028488a.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_buildManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_ssgManifest.js" defer=""></script><script src="/_next/static/k2SjylS4DhAPzPoZgQ49x/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class=""><div class="pt-40 pb-36 px-20 border-b-[1px] relative"><h1 class="font-bold tracking-tighter leading-tight md:leading-none mb-4 text-center text-3xl">Google Actions를 이용한 flutter 앱 배포</h1><div class="flex justify-center"><em class="text-sm"><time dateTime="2019. 12. 16. 11:48">2019. 12. 16. 11:48</time></em></div></div><div class="w-[650px] pt-10 pb-20 mx-auto"><article class="prose"><p>electron, npm 배포에 이어 flutter 앱도 Github Actions로 배포를 해보기로 했다.</p>
<p>flutter 빌드를 위해서 필요한 것은 의외로 단순하다. java, flutter 가 전부다. ios 빌드를 위해서는 os를 macos로 하는 것이 필요하겠지만 일단은 android로만 빌드하기 때문에 ubuntu로 했다.</p>
<pre><code>- uses: subosito/flutter-action@v1
  with:
    channel: &#39;stable&#39;</code></pre><p>flutter의 준비는 <a href="https://github.com/marketplace/actions/flutter-action">subosito/flutter-action</a>를 사용할 수 있고, <code>channel</code>이나 <code>flutter-version</code>을 옵션으로 변경할 수 있다. 결과물은 electron에서와 마찬가지로 release에 업로드를 했다. 생각 같아서는 google play api를 사용해서 테스트버전으로 업로드까지 하고 싶었는데... 그래봐야 결국 수동으로 설명쓰고 검토버튼 누르고 출시버튼 누르고 해야해서 거기까지는 하지 않았다.</p>
<p>아래는 전체 코드다. github actions 만세!</p>
<pre><code>name: Release

on:
  push:
    tags:
      - v*

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo &quot;$GITHUB_CONTEXT&quot;
      - uses: actions/checkout@v1
        with:
          fetch-depth: 1
      - uses: actions/setup-java@v1
        with:
          java-version: &#39;12.x&#39;
      - uses: subosito/flutter-action@v1
        with:
          channel: &#39;stable&#39;
      - name: Decrypt secret
        run: ./.github/scripts/decrypt_secret.sh
        env:
          BUILD_KEY: ${{ secrets.BUILD_KEY }}
          BUILD_IV: ${{ secrets.BUILD_IV }}
      - name: Build App
        run: |
          flutter pub get
          flutter build apk --split-per-abi
      - name: Release
        uses: softprops/action-gh-release@v1
        with:
          files: |
            build/app/outputs/apk/release/*.apk
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}</code></pre>            </article></div></div></main></div><footer class="bg-slate-100 border-t border-accent-2 mt-6"><div class="py-4 flex flex-col items-center justify-center text-xs text-slate-500"><a href="https://twitter.com/@JooStory">@JooStory</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"586","date":"2019. 12. 16. 11:48","title":"Google Actions를 이용한 flutter 앱 배포","content":"\u003cp\u003eelectron, npm 배포에 이어 flutter 앱도 Github Actions로 배포를 해보기로 했다.\u003c/p\u003e\n\u003cp\u003eflutter 빌드를 위해서 필요한 것은 의외로 단순하다. java, flutter 가 전부다. ios 빌드를 위해서는 os를 macos로 하는 것이 필요하겠지만 일단은 android로만 빌드하기 때문에 ubuntu로 했다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e- uses: subosito/flutter-action@v1\n  with:\n    channel: \u0026#39;stable\u0026#39;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eflutter의 준비는 \u003ca href=\"https://github.com/marketplace/actions/flutter-action\"\u003esubosito/flutter-action\u003c/a\u003e를 사용할 수 있고, \u003ccode\u003echannel\u003c/code\u003e이나 \u003ccode\u003eflutter-version\u003c/code\u003e을 옵션으로 변경할 수 있다. 결과물은 electron에서와 마찬가지로 release에 업로드를 했다. 생각 같아서는 google play api를 사용해서 테스트버전으로 업로드까지 하고 싶었는데... 그래봐야 결국 수동으로 설명쓰고 검토버튼 누르고 출시버튼 누르고 해야해서 거기까지는 하지 않았다.\u003c/p\u003e\n\u003cp\u003e아래는 전체 코드다. github actions 만세!\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ename: Release\n\non:\n  push:\n    tags:\n      - v*\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Context\n        env:\n          GITHUB_CONTEXT: ${{ toJson(github) }}\n        run: echo \u0026quot;$GITHUB_CONTEXT\u0026quot;\n      - uses: actions/checkout@v1\n        with:\n          fetch-depth: 1\n      - uses: actions/setup-java@v1\n        with:\n          java-version: \u0026#39;12.x\u0026#39;\n      - uses: subosito/flutter-action@v1\n        with:\n          channel: \u0026#39;stable\u0026#39;\n      - name: Decrypt secret\n        run: ./.github/scripts/decrypt_secret.sh\n        env:\n          BUILD_KEY: ${{ secrets.BUILD_KEY }}\n          BUILD_IV: ${{ secrets.BUILD_IV }}\n      - name: Build App\n        run: |\n          flutter pub get\n          flutter build apk --split-per-abi\n      - name: Release\n        uses: softprops/action-gh-release@v1\n        with:\n          files: |\n            build/app/outputs/apk/release/*.apk\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\u003c/code\u003e\u003c/pre\u003e            ","summary":"electron, npm 배포에 이어 flutter 앱도 Github Actions로 배포를 해보기로 했다.\nflutter 빌드를 위해서 필요한 것은 의외로 단순하다. java, flutter 가 전부다. ios 빌드를 위해서는 os를 macos로 하는 것이 필요하겠지만 일단은 android로만 빌드하기 때문에 ubuntu로 했다.\n\u003ccode\u003e- uses: subosito/flutter-action@v1\n  with:\n    channel: \u0026#39;s","image":"https://t1.daumcdn.net/tistory_admin/static/images/openGraph/opengraph.png"}},"__N_SSG":true},"page":"/tistory/[id]","query":{"id":"586"},"buildId":"k2SjylS4DhAPzPoZgQ49x","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>